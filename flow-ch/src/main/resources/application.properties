# ================================================================
# PIXEL-V2 Camel Application Configuration
# ================================================================

# ================================================================
# SERVER & SPRING BOOT CONFIGURATION
# ================================================================
server.port=8080
server.shutdown=graceful
spring.application.name=pixel-camel-app
spring.main.banner-mode=console
spring.output.ansi.enabled=always

# ================================================================
# CAMEL CORE CONFIGURATION
# ================================================================
camel.springboot.name=pixel-camel-context
camel.springboot.jmx-enabled=true
camel.springboot.load-type-converters=true
camel.springboot.type-conversion=true
camel.springboot.auto-startup=true
camel.springboot.shutdown-timeout=60
camel.springboot.xml-routes=false
camel.springboot.xml-rests=false
camel.dsl.yaml.enabled=true

# ================================================================
# CAMEL HEALTH CHECK CONFIGURATION
# ================================================================
camel.health.enabled=true
camel.health.config.enabled=true
camel.health.indicator-enabled=true
camel.health.exclude-pattern=kafka*
camel.component.kafka.health-check-enabled=false
camel.main.health-check-registry-enabled=false

# ================================================================
# KAFKA CONFIGURATION
# ================================================================
# Kafka Component Configuration
camel.component.kafka.brokers=localhost:9092
camel.component.kafka.health-check-consumer-enabled=false
camel.component.kafka.health-check-producer-enabled=false

# Kafka Consumer Properties
camel.component.kafka.consumer-properties[enable.auto.commit]=true
camel.component.kafka.consumer-properties[auto.commit.interval.ms]=1000
camel.component.kafka.consumer-properties[session.timeout.ms]=30000
camel.component.kafka.consumer-properties[key.deserializer]=org.apache.kafka.common.serialization.StringDeserializer
camel.component.kafka.consumer-properties[value.deserializer]=org.apache.kafka.common.serialization.StringDeserializer
camel.component.kafka.consumer-properties[auto.offset.reset]=latest

# Kafka Additional Properties
camel.component.kafka.configuration.additional-properties[client.rack]=
camel.component.kafka.configuration.additional-properties[allow.auto.create.topics]=false
spring.kafka.consumer.properties.security.protocol=PLAINTEXT
spring.kafka.consumer.properties.enable.idempotence=false

# ================================================================
# CAMEL COMPONENTS CONFIGURATION
# ================================================================
camel.component.jms.connection-factory=cachingConnectionFactory
camel.component.kamelet.location=classpath:kamelets

# ================================================================
# ACTIVEMQ CONFIGURATION
# ================================================================
pixel.activemq.broker-url=tcp://localhost:61616
pixel.activemq.username=admin
pixel.activemq.password=admin
pixel.activemq.pool.enabled=true
pixel.activemq.pool.max-connections=10

# ================================================================
# REDIS CONFIGURATION
# ================================================================
# Redis Connection for k-identification kamelet
pixel.redis.host=redis
pixel.redis.port=6379

# ================================================================
# DATABASE & JPA CONFIGURATION
# ================================================================
# Database Connection
spring.datasource.url=jdbc:postgresql://localhost:5432/pixelv2
spring.datasource.username=pixelv2
spring.datasource.password=pixelv2_secure_password
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Properties
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.default_schema=pixel_v2

# Connection Pool Properties
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# ================================================================
# MANAGEMENT & ACTUATOR CONFIGURATION
# ================================================================
management.endpoints.web.exposure.include=health,info,metrics,camel,jolokia,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.health.camel.enabled=true

# ================================================================
# JMX CONFIGURATION
# ================================================================
spring.jmx.enabled=true
spring.jmx.default-domain=pixel-camel-app

# ================================================================
# LOGGING CONFIGURATION
# ================================================================
logging.level.com.pixel.v2=INFO
logging.level.org.apache.camel=DEBUG
logging.level.org.apache.camel.spring.boot=DEBUG
logging.level.org.apache.camel.impl.engine=DEBUG
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.org.apache.kafka=WARN
logging.level.org.apache.camel.component.kafka=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ================================================================
# APPLICATION INFO
# ================================================================
info.app.name=PIXEL-V2 Camel Application
info.app.description=Standalone Spring Boot Camel application for payment processing
info.app.version=1.0.0

# ================================================================
# KAMELET CONFIGURATION
# ================================================================

# K-MQ Starter Kamelet Configuration
kmq.starter.mqFileName=pacs008.input.queue
kmq.starter.connectionFactory=jmsConnectionFactory
kmq.starter.concurrentConsumers=1
kmq.starter.flowCode=ICHSIC
kmq.starter.payementType=PACS008
kmq.starter.messageType=PACS.008.001.02
kmq.starter.kafkaFlowSummaryTopicName=ch-flow-summary
kmq.starter.kafkaLogTopicName=ch-log-events
kmq.starter.kafkaDistributionTopicName=ch-distribution
kmq.starter.brokers=localhost:9092
kmq.starter.sinkEndpoint=direct:pacs008-sink-processing
kmq.starter.flowCountryCode=FR
kmq.starter.flowCountryId=250
kmq.starter.dataSource=#dataSource

# K-Log Flow Summary Kamelet Configuration
k.log.flow.summary.sinkEndpoint=direct:log-flow-summary-sink

# K-Identification Kamelet Configuration
pixel.referentiel.service.url=http://pixel-v2-referentiel:8099
pixel.kafka.brokers=kafka:29092
pixel.cache.ttl=3600

# ================================================================
# CH LOG ROUTE CONFIGURATION
# ================================================================

# Kafka Consumer Configuration for flow-summary topic
ch.log.kafka.brokers=kafka:29092
ch.log.kafka.groupId=ch
ch.log.kafka.offsetReset=latest

# External referentiel endpoint (legacy - now handled by k-identification kamelet)
referentiel.service.url=http://pixel-v2-referentiel:8099


