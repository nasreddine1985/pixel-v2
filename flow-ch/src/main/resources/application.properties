# PIXEL-V2 Camel Application Configuration

# Server Configuration
server.port=8080
server.shutdown=graceful
spring.application.name=pixel-camel-app

# Spring Boot Configuration
spring.main.banner-mode=console
spring.output.ansi.enabled=always

# Camel Configuration
camel.springboot.name=pixel-camel-context
camel.springboot.jmx-enabled=true
camel.springboot.load-type-converters=true
camel.springboot.type-conversion=true
camel.springboot.auto-startup=true
camel.springboot.shutdown-timeout=60

# Java DSL Route Configuration
camel.springboot.xml-routes=false
camel.springboot.xml-rests=false  
camel.springboot.auto-startup=true
# Enable YAML DSL for kamelet templates
camel.dsl.yaml.enabled=true

# Camel Health Check
camel.health.enabled=true
camel.health.config.enabled=true
camel.health.indicator-enabled=true

# Camel Components Configuration
camel.component.kafka.brokers=pixel-v2-kafka:9092
camel.component.jms.connection-factory=cachingConnectionFactory

# Kamelet Configuration
camel.component.kamelet.location=classpath:kamelets

# ActiveMQ Configuration
pixel.activemq.broker-url=tcp://pixel-v2-activemq:61616
pixel.activemq.username=admin
pixel.activemq.password=admin
pixel.activemq.pool.enabled=true
pixel.activemq.pool.max-connections=10

# Database Configuration
spring.datasource.url=jdbc:postgresql://pixel-v2-db:5432/pixel_v2
spring.datasource.username=pixel_user
spring.datasource.password=pixel_pass
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,camel,jolokia,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.health.camel.enabled=true

# JMX Configuration
spring.jmx.enabled=true
spring.jmx.default-domain=pixel-camel-app

# Logging Configuration
logging.level.com.pixel.v2=INFO
logging.level.org.apache.camel=DEBUG
logging.level.org.apache.camel.spring.boot=DEBUG
logging.level.org.apache.camel.impl.engine=DEBUG
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Application Info
info.app.name=PIXEL-V2 Camel Application
info.app.description=Standalone Spring Boot Camel application for payment processing
info.app.version=1.0.0

# Java DSL Configuration
# Routes are discovered automatically via Spring @Component annotations

# K-MQ Starter Kamelet Configuration
kmq.starter.mqFileName=pacs008.input.queue
kmq.starter.connectionFactory=jmsConnectionFactory
kmq.starter.concurrentConsumers=1
kmq.starter.flowCode=PACS008
kmq.starter.messageType=PACS008
kmq.starter.kafkaTopicName=flow-summary
kmq.starter.brokers=pixel-v2-kafka:29092
kmq.starter.sinkEndpoint=direct:pacs008-main-processing
kmq.starter.flowCountryCode=FR
kmq.starter.flowCountryId=250

# K-Log Flow Summary Kamelet Configuration
k.log.flow.summary.sinkEndpoint=direct:log-flow-summary-sink
