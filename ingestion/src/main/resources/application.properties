# Payment Ingestion Service Configuration

# Server Configuration
server.port=8080
server.servlet.context-path=/ingestion

# Spring Boot Configuration
spring.application.name=payment-ingestion-service
spring.profiles.active=dev

# Camel Configuration
camel.springboot.name=payment-ingestion-camel
camel.springboot.main-run-controller=true
camel.springboot.jmx-enabled=true

# Ingestion Configuration
# MQ Series Configuration
ingestion.mq.input.queue=PAYMENT_INPUT
ingestion.mq.host=localhost
ingestion.mq.port=1414
ingestion.mq.queue.manager=QM1
ingestion.mq.channel=DEV.ADMIN.SVRCONN

# File Processing Configuration  
ingestion.file.input.directory=/tmp/payments-in
ingestion.file.processed.directory=/tmp/payments-processed
ingestion.file.pattern=.*\\.xml
ingestion.file.error.directory=/tmp/payments-error

# Kafka Configuration
ingestion.kafka.brokers=localhost:9092
ingestion.kafka.topic.default=payments-processed
ingestion.kafka.topic.pacs008=payments-pacs008
ingestion.kafka.topic.pan001=payments-pan001
ingestion.kafka.topic.rejected=payments-rejected
ingestion.kafka.topic.errors=payments-errors

# Processing Module Integration
# CFT messages go to Kafka (existing process)
# HTTP/MQ messages go directly to processing module
ingestion.processing.endpoint=direct:kafka-message-processing
ingestion.processing.enabled=true

# Reference API Configuration
ingestion.reference.api.url=http://localhost:8081/api/v1/reference
ingestion.reference.api.timeout=5000
ingestion.reference.api.retry.max=3

# Validation Configuration
ingestion.validation.strict.mode=false
ingestion.validation.fail.on.warnings=false

# Idempotence Configuration
ingestion.idempotence.duplicate.action=ERROR
ingestion.idempotence.repository.type=MEMORY
ingestion.idempotence.expiry.days=30

# Database Configuration (for k-database-transaction kamelet)
# Database / JPA Configuration
db.host=localhost
db.port=1521
db.service=ORCLCDB
db.username=app
db.password=pass

# DataSource Configuration
spring.datasource.url=jdbc:oracle:thin:@//${db.host}:${db.port}/${db.service}
spring.datasource.username=${db.username}
spring.datasource.password=${db.password}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=20000

# Hibernate / JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# Transaction Configuration
spring.transaction.default-timeout=30

# Persistence Configuration (for k-database-transaction)
persistence.batch.size=1
persistence.timeout.seconds=30
persistence.audit.enabled=true

# Monitoring and Health
management.endpoints.web.exposure.include=health,metrics,info,camel
management.endpoint.health.show-details=always
management.health.camel.enabled=true

# Logging Configuration
logging.level.com.pixel.v2.ingestion=INFO
logging.level.org.apache.camel=INFO
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n