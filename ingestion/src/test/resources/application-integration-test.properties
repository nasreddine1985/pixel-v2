# Integration Test Configuration for MainIngestionRoutesIntegrationTest
# This configuration allows routes to load for integration testing

# Enable YAML routes specifically for integration tests
camel.routes.yaml.enabled=true
camel.springboot.main-run-controller=false
camel.springboot.auto-startup=false

# Load test routes
camel.springboot.routes-include-pattern=classpath:camel/test-ingestion-routes.yaml
camel.springboot.routes-exclude-pattern=

# Completely disable kamelet auto-configuration and loading to avoid conflicts
camel.component.kamelet.location=
camel.kamelet.location=
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
  org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\
  org.apache.camel.component.kamelet.springboot.KameletComponentAutoConfiguration

# Database Configuration (H2 in-memory)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false

# Disable JPA and JMS auto-configuration to avoid conflicts
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
  org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration

# Test Logging
logging.level.com.pixel.v2.ingestion=INFO
logging.level.org.apache.camel=INFO
logging.level.org.springframework=WARN
logging.level.root=WARN