# Test Configuration for Ingestion Module

# Disable JPA, Database and ALL Camel components for tests
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.apache.camel.spring.boot.CamelAutoConfiguration,\
  org.apache.camel.component.platform.http.springboot.SpringBootPlatformHttpAutoConfiguration

# Test Database Configuration (H2 in-memory for tests that need DB)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false

# Camel Test Configuration - Completely disable routes for tests
camel.routes.yaml.enabled=false
camel.springboot.main-run-controller=false
camel.springboot.auto-startup=false
camel.component.kamelet.location=
camel.kamelet.location=
# Disable all route discovery during tests
camel.springboot.routes-include-pattern=
# Exclude all route directories
camel.springboot.routes-exclude-pattern=**/*

# Test Kafka Configuration
ingestion.kafka.brokers=localhost:9092
ingestion.kafka.topic.default=test-payments-processed
ingestion.kafka.topic.pacs008=test-payments-pacs008
ingestion.kafka.topic.pacs009=test-payments-pacs009
ingestion.kafka.topic.pain001=test-payments-pain001
ingestion.kafka.topic.camt053=test-payments-camt053
ingestion.kafka.topic.rejected=test-payments-rejected
ingestion.kafka.topic.errors=test-payments-errors

# Test File Directories
ingestion.file.input.directory=/tmp/test-payments-in
ingestion.file.processed.directory=/tmp/test-payments-processed
ingestion.file.error.directory=/tmp/test-payments-error

# Test MQ Configuration
ingestion.mq.host=localhost
ingestion.mq.port=1414
ingestion.mq.queue.manager=QM1
ingestion.mq.channel=DEV.ADMIN.SVRCONN
ingestion.mq.username=admin
ingestion.mq.password=admin
ingestion.mq.input.queue=TEST_PAYMENT_INPUT

# Test HTTP Configuration
server.port=8099
server.servlet.context-path=/test

# Test Validation Configuration
ingestion.validation.strict.mode=false
ingestion.validation.fail.on.warnings=false

# Test Idempotence Configuration
ingestion.idempotence.duplicate.action=ERROR
ingestion.idempotence.repository.type=MEMORY
ingestion.idempotence.expiry.days=1

# Test Logging
logging.level.com.pixel.v2.ingestion=DEBUG
logging.level.org.apache.camel=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
