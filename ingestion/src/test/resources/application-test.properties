# Test Configuration

# Test MQ Configuration (mock)
mq.connectionFactoryRef=mqConnectionFactory
mq.destination=test.payment.queue

# Test HTTP Configuration (mock)
http.path=/test/payments
http.port=8099

# Test CFT Configuration (mock)  
cft.path=/tmp/test-cft
cft.pattern=*.xml

# Test Kafka Configuration (use embedded or mock)
ingestion.kafka.brokers=localhost:9092
ingestion.kafka.topic.default=test-payments-processed
ingestion.kafka.topic.pacs008=test-payments-pacs008
ingestion.kafka.topic.pan001=test-payments-pan001
ingestion.kafka.topic.rejected=test-payments-rejected
ingestion.kafka.topic.errors=test-payments-errors

# Test File Directories
ingestion.file.input.directory=/tmp/test-payments-in
ingestion.file.processed.directory=/tmp/test-payments-processed
ingestion.file.error.directory=/tmp/test-payments-error

# Test Reference API (mock)
ingestion.reference.api.url=http://localhost:8081/api/v1/reference

# Kamelet Configuration for Tests
refloader.serviceUrl=http://localhost:8080
k-ingest-validation.endpoint=http://localhost:8080/validation
k-idempotence.endpoint=http://localhost:8080/idempotence

# Test Validation Configuration
ingestion.validation.strict.mode=false
ingestion.validation.fail.on.warnings=false

# Test Idempotence Configuration
ingestion.idempotence.duplicate.action=ERROR
ingestion.idempotence.repository.type=MEMORY
ingestion.idempotence.expiry.days=1

# Test Database Configuration (in-memory H2 for testing)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true

# Test Persistence Configuration
persistence.batch.size=1
persistence.timeout.seconds=5
persistence.audit.enabled=false

# Disable Camel main controller for tests
camel.springboot.main-run-controller=false

# Disable kamelet loading in test environment
camel.component.kamelet.location=
camel.kamelet.location=

# Use test-specific routes instead of production routes
camel.springboot.routes-include-pattern=classpath:camel/test-*.yaml

# Test Logging
logging.level.com.pixel.v2.ingestion=DEBUG
logging.level.org.apache.camel=INFO