<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is generated by Kaoto DataMapper. Do not edit. -->
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="3.0" xmlns:pfx2="http://www.six-interbank-clearing.com/de/pacs.008.001.02.ch.02" xmlns:pfx3="http://bnpparibas.com/G02" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<xsl:output method="xml" indent="yes"/>
	<xsl:param name="FlowCode"/>
	<xsl:param name="FlowId"/>
	<xsl:param name="PartnerFrom"/>
	<xsl:param name="PartnerTo"/>
	<xsl:param name="BIC"/>
	<xsl:param name="PcssA2Bank"/>
	<xsl:template match="/">
		<Document>
			<pfx3:ITLHdr>
				<pfx3:ITLFlow>
					<pfx3:ITLFlowCd>
						<xsl:value-of select="$FlowCode"/>
					</pfx3:ITLFlowCd>
					<pfx3:ITLFlowOcc>
						<xsl:value-of select="$FlowId"/>
					</pfx3:ITLFlowOcc>
				</pfx3:ITLFlow>
				<pfx3:InOutInd>
					<xsl:value-of select="'O'"/>
				</pfx3:InOutInd>
				<pfx3:PrtnFrom>
					<xsl:value-of select="$PartnerFrom"/>
				</pfx3:PrtnFrom>
				<pfx3:PrtnTo>
					<xsl:value-of select="$PartnerTo"/>
				</pfx3:PrtnTo>
				<pfx3:IssrBk>
					<pfx3:BIC>
						<xsl:value-of select="$BIC"/>
					</pfx3:BIC>
					<pfx3:PcssA2Bank>
						<xsl:value-of select="$PcssA2Bank"/>
					</pfx3:PcssA2Bank>
				</pfx3:IssrBk>
				<pfx3:NbOfPmtPvt>
					<xsl:value-of select="count(pfx2:Document)"/>
				</pfx3:NbOfPmtPvt>
			</pfx3:ITLHdr>
			<pfx3:PmtPvt>
				<InstrInf>
					<ITLIdInf>
						<ITLMsgNmId>
							<xsl:value-of select="&quot;pacs.008.001.02.CH&quot;"/>
						</ITLMsgNmId>
						<ITLRef>
							<xsl:value-of select="'ITLRef'"/>
						</ITLRef>
					</ITLIdInf>
					<InstrIdInf>
						<MsgId>
							<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:MsgId"/>
						</MsgId>
						<CreDtTm>
							<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:CreDtTm"/>
						</CreDtTm>
						<xsl:if test="string-length(/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:NbOfTxs)>0">
							<NbOfTxs>
								<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:NbOfTxs"/>
							</NbOfTxs>
						</xsl:if>
					</InstrIdInf>
					<xsl:choose>
						<xsl:when test="string-length(/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:InstgAgt)>0">
							<ActInf>
								<ActTp>
									<xsl:value-of select="'INSTGAGT'"/>
								</ActTp>
								<Agt>
									<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:InstgAgt/pfx2:FinInstnId">
										<FinInstnId>
											<xsl:if test="current()/pfx2:BIC">
												<BICFI>
													<xsl:value-of select="current()/pfx2:BIC"/>
												</BICFI>
											</xsl:if>
											<xsl:for-each select="pfx2:ClrSysMmbId">
												<ClrSysMmbId>
													<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
														<xsl:for-each select="pfx2:ClrSysId">
															<ClrSysId>
																<xsl:choose>
																	<xsl:when test="string-length(current()/pfx2:Cd)>0">
																		<Cd>
																			<xsl:value-of select="current()/pfx2:Cd"/>
																		</Cd>
																	</xsl:when>
																	<xsl:otherwise>
																		<Prtry>
																			<xsl:value-of select="current()/pfx2:Prtry"/>
																		</Prtry>
																	</xsl:otherwise>
																</xsl:choose>
															</ClrSysId>
														</xsl:for-each>
													</xsl:if>
													<MmbId>
														<xsl:value-of select="pfx2:MmbId"/>
													</MmbId>
												</ClrSysMmbId>
											</xsl:for-each>
										</FinInstnId>
									</xsl:for-each>
								</Agt>
							</ActInf>
						</xsl:when>
						<xsl:when test="string-length(/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:InstdAgt)>0">
							<ActInf>
								<ActTp>
									<xsl:value-of select="'INSTDAGT'"/>
								</ActTp>
								<Agt>
									<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:InstdAgt/pfx2:FinInstnId">
										<FinInstnId>
											<xsl:if test="current()/pfx2:BIC">
												<BICFI>
													<xsl:value-of select="current()/pfx2:BIC"/>
												</BICFI>
											</xsl:if>
											<xsl:for-each select="pfx2:ClrSysMmbId">
												<ClrSysMmbId>
													<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
														<xsl:for-each select="pfx2:ClrSysId">
															<ClrSysId>
																<xsl:choose>
																	<xsl:when test="string-length(current()/pfx2:Cd)>0">
																		<Cd>
																			<xsl:value-of select="current()/pfx2:Cd"/>
																		</Cd>
																	</xsl:when>
																	<xsl:otherwise>
																		<Prtry>
																			<xsl:value-of select="current()/pfx2:Prtry"/>
																		</Prtry>
																	</xsl:otherwise>
																</xsl:choose>
															</ClrSysId>
														</xsl:for-each>
													</xsl:if>
													<MmbId>
														<xsl:value-of select="pfx2:MmbId"/>
													</MmbId>
												</ClrSysMmbId>
											</xsl:for-each>
											<xsl:for-each select="pfx2:Othr">
												<Othr>
													<Id>
														<xsl:value-of select="pfx2:Id"/>
													</Id>
												</Othr>
											</xsl:for-each>
										</FinInstnId>
									</xsl:for-each>
								</Agt>
							</ActInf>
						</xsl:when>
					</xsl:choose>
					<IntrBkInf>
						<xsl:if test="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:TtlIntrBkSttlmAmt">
							<TtlIntrBkSttlmAmt>
								<xsl:attribute name="Ccy">
									<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:TtlIntrBkSttlmAmt/@Ccy"/>
								</xsl:attribute>
								<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:TtlIntrBkSttlmAmt"/>
							</TtlIntrBkSttlmAmt>
						</xsl:if>
						<DtTmInf>
							<IntrBkSttlmDt>
								<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:IntrBkSttlmDt"/>
							</IntrBkSttlmDt>
						</DtTmInf>
						<SttlmTxInf>
							<SttlmInf>
								<SttlmMtd>
									<xsl:value-of select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:SttlmMtd"/>
								</SttlmMtd>
								<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:SttlmAcct">
									<SttlmAcct>
										<xsl:for-each select="pfx2:Id">
											<Id>
												<xsl:choose>
													<xsl:when test="string-length(current()/pfx2:IBAN)>0">
														<IBAN>
															<xsl:value-of select="current()/pfx2:IBAN"/>
														</IBAN>
													</xsl:when>
													<xsl:otherwise>
														<Othr>
															<Id>
																<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
															</Id>
															<xsl:if test="string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry)>0">
																<xsl:for-each select="current()/pfx2:Othr/pfx2:SchmeNm">
																	<SchmeNm>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:Cd)>0">
																				<Cd>
																					<xsl:value-of select="current()/pfx2:Cd"/>
																				</Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<Prtry>
																					<xsl:value-of select="current()/pfx2:Prtry"/>
																				</Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</SchmeNm>
																</xsl:for-each>
															</xsl:if>
															<xsl:if test="current()/pfx2:Othr/pfx2:Issr">
																<Issr>
																	<xsl:value-of select="current()/pfx2:Othr/pfx2:Issr"/>
																</Issr>
															</xsl:if>
														</Othr>
													</xsl:otherwise>
												</xsl:choose>
											</Id>
										</xsl:for-each>
										<xsl:if test="string-length(current()/pfx2:Tp/pfx2:Cd)>0 or string-length(current()/pfx2:Tp/pfx2:Prtry)>0">
											<xsl:for-each select="pfx2:Tp">
												<Tp>
													<xsl:choose>
														<xsl:when test="string-length(current()/pfx2:Cd)>0">
															<Cd>
																<xsl:value-of select="current()/pfx2:Cd"/>
															</Cd>
														</xsl:when>
														<xsl:otherwise>
															<Prtry>
																<xsl:value-of select="current()/pfx2:Prtry"/>
															</Prtry>
														</xsl:otherwise>
													</xsl:choose>
												</Tp>
											</xsl:for-each>
										</xsl:if>
										<xsl:if test="pfx2:Ccy">
											<Ccy>
												<xsl:value-of select="pfx2:Ccy"/>
											</Ccy>
										</xsl:if>
										<xsl:if test="pfx2:Nm">
											<Nm>
												<xsl:value-of select="pfx2:Nm"/>
											</Nm>
										</xsl:if>
									</SttlmAcct>
								</xsl:for-each>
								<xsl:if test="string-length(/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:ClrSys/pfx2:Cd)>0 or string-length(/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:ClrSys/pfx2:Prtry)>0">
									<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:ClrSys">
										<ClrSys>
											<xsl:choose>
												<xsl:when test="string-length(current()/pfx2:Cd)>0">
													<Cd>
														<xsl:value-of select="current()/pfx2:Cd"/>
													</Cd>
												</xsl:when>
												<xsl:otherwise>
													<Prtry>
														<xsl:value-of select="current()/pfx2:Prtry"/>
													</Prtry>
												</xsl:otherwise>
											</xsl:choose>
										</ClrSys>
									</xsl:for-each>
								</xsl:if>
								<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:GrpHdr/pfx2:SttlmInf/pfx2:InstgRmbrsmntAgt">
									<InstgRmbrsmntAgt>
										<xsl:for-each select="pfx2:FinInstnId">
											<FinInstnId>
												<xsl:if test="current()/pfx2:BIC">
													<BICFI>
														<xsl:value-of select="current()/pfx2:BIC"/>
													</BICFI>
												</xsl:if>
												<xsl:for-each select="pfx2:ClrSysMmbId">
													<ClrSysMmbId>
														<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
															<xsl:for-each select="pfx2:ClrSysId">
																<ClrSysId>
																	<xsl:choose>
																		<xsl:when test="string-length(current()/pfx2:Cd)>0">
																			<Cd>
																				<xsl:value-of select="current()/pfx2:Cd"/>
																			</Cd>
																		</xsl:when>
																		<xsl:otherwise>
																			<Prtry>
																				<xsl:value-of select="current()/pfx2:Prtry"/>
																			</Prtry>
																		</xsl:otherwise>
																	</xsl:choose>
																</ClrSysId>
															</xsl:for-each>
														</xsl:if>
														<MmbId>
															<xsl:value-of select="pfx2:MmbId"/>
														</MmbId>
													</ClrSysMmbId>
												</xsl:for-each>
												<xsl:if test="pfx2:Nm">
													<Nm>
														<xsl:value-of select="pfx2:Nm"/>
													</Nm>
												</xsl:if>
												<xsl:for-each select="pfx2:PstlAdr">
													<PstlAdr>
														<xsl:if test="pfx2:Dept">
															<Dept>
																<xsl:value-of select="pfx2:Dept"/>
															</Dept>
														</xsl:if>
														<xsl:if test="pfx2:SubDept">
															<SubDept>
																<xsl:value-of select="pfx2:SubDept"/>
															</SubDept>
														</xsl:if>
														<xsl:if test="pfx2:StrtNm">
															<StrtNm>
																<xsl:value-of select="pfx2:StrtNm"/>
															</StrtNm>
														</xsl:if>
														<xsl:if test="pfx2:BldgNb">
															<BldgNb>
																<xsl:value-of select="pfx2:BldgNb"/>
															</BldgNb>
														</xsl:if>
														<xsl:if test="pfx2:PstCd">
															<PstCd>
																<xsl:value-of select="pfx2:PstCd"/>
															</PstCd>
														</xsl:if>
														<xsl:if test="pfx2:TwnNm">
															<TwnNm>
																<xsl:value-of select="pfx2:TwnNm"/>
															</TwnNm>
														</xsl:if>
														<xsl:if test="pfx2:CtrySubDvsn">
															<CtrySubDvsn>
																<xsl:value-of select="pfx2:CtrySubDvsn"/>
															</CtrySubDvsn>
														</xsl:if>
														<xsl:if test="pfx2:Ctry">
															<Ctry>
																<xsl:value-of select="pfx2:Ctry"/>
															</Ctry>
														</xsl:if>
														<xsl:for-each select="pfx2:AdrLine">
															<AdrLine>
																<xsl:value-of select="."/>
															</AdrLine>
														</xsl:for-each>
													</PstlAdr>
												</xsl:for-each>
												<xsl:for-each select="pfx2:Othr">
													<Othr>
														<Id>
															<xsl:value-of select="pfx2:Id"/>
														</Id>
														<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
															<xsl:for-each select="current()/pfx2:SchmeNm">
																<SchmeNm>
																	<xsl:choose>
																		<xsl:when test="string-length(current()/pfx2:Cd)>0">
																			<Cd>
																				<xsl:value-of select="current()/pfx2:Cd"/>
																			</Cd>
																		</xsl:when>
																		<xsl:otherwise>
																			<Prtry>
																				<xsl:value-of select="current()/pfx2:Prtry"/>
																			</Prtry>
																		</xsl:otherwise>
																	</xsl:choose>
																</SchmeNm>
															</xsl:for-each>
														</xsl:if>
														<xsl:if test="pfx2:Issr">
															<Issr>
																<xsl:value-of select="pfx2:Issr"/>
															</Issr>
														</xsl:if>
													</Othr>
												</xsl:for-each>
											</FinInstnId>
										</xsl:for-each>
										<xsl:for-each select="pfx2:BrnchId">
											<BrnchId>
												<xsl:if test="pfx2:Id">
													<Id>
														<xsl:value-of select="pfx2:Id"/>
													</Id>
												</xsl:if>
												<xsl:if test="pfx2:Nm">
													<Nm>
														<xsl:value-of select="pfx2:Nm"/>
													</Nm>
												</xsl:if>
												<xsl:for-each select="pfx2:PstlAdr">
													<PstlAdr>
														<AdrTp>
															<Cd>
																<xsl:value-of select="current()/pfx2:AdrTp"/>
															</Cd>
														</AdrTp>
														<xsl:if test="pfx2:Dept">
															<Dept>
																<xsl:value-of select="pfx2:Dept"/>
															</Dept>
														</xsl:if>
														<xsl:if test="pfx2:SubDept">
															<SubDept>
																<xsl:value-of select="pfx2:SubDept"/>
															</SubDept>
														</xsl:if>
														<xsl:if test="pfx2:StrtNm">
															<StrtNm>
																<xsl:value-of select="pfx2:StrtNm"/>
															</StrtNm>
														</xsl:if>
														<xsl:if test="pfx2:BldgNb">
															<BldgNb>
																<xsl:value-of select="pfx2:BldgNb"/>
															</BldgNb>
														</xsl:if>
														<xsl:if test="pfx2:PstCd">
															<PstCd>
																<xsl:value-of select="pfx2:PstCd"/>
															</PstCd>
														</xsl:if>
														<xsl:if test="pfx2:TwnNm">
															<TwnNm>
																<xsl:value-of select="pfx2:TwnNm"/>
															</TwnNm>
														</xsl:if>
														<xsl:if test="pfx2:CtrySubDvsn">
															<CtrySubDvsn>
																<xsl:value-of select="pfx2:CtrySubDvsn"/>
															</CtrySubDvsn>
														</xsl:if>
														<xsl:if test="pfx2:Ctry">
															<Ctry>
																<xsl:value-of select="pfx2:Ctry"/>
															</Ctry>
														</xsl:if>
														<xsl:for-each select="pfx2:AdrLine">
															<AdrLine>
																<xsl:value-of select="."/>
															</AdrLine>
														</xsl:for-each>
													</PstlAdr>
												</xsl:for-each>
											</BrnchId>
										</xsl:for-each>
									</InstgRmbrsmntAgt>
								</xsl:for-each>
							</SttlmInf>
						</SttlmTxInf>
					</IntrBkInf>
				</InstrInf>
				<xsl:for-each select="/pfx2:Document/pfx2:FIToFICstmrCdtTrf/pfx2:CdtTrfTxInf">
					<pfx3:TxInf>
						<pfx3:ITLIdInf>
							<pfx3:ITLRef>
								<xsl:value-of select="'ITLRef'"/>
							</pfx3:ITLRef>
						</pfx3:ITLIdInf>
						<pfx3:PrtnrInf>
							<pfx3:PASS>
								<pfx3:TxCmpstgRef>
									<xsl:value-of select="format-dateTime(current-dateTime(),'[Y0001][M01][D01][H01][m01][s01]')"/>
								</pfx3:TxCmpstgRef>
								<pfx3:SeqNb>
									<xsl:value-of select="format-integer(position(),'000000000')"/>
								</pfx3:SeqNb>
							</pfx3:PASS>
						</pfx3:PrtnrInf>
						<pfx3:TxIdInf>
							<pfx3:PmtId>
								<xsl:choose>
									<xsl:when test="../../../FlowCode=&quot;OCHSIC&quot; and (pfx2:PmtTpInf/pfx2:LclInstrm/pfx2:Prtry='ESRDEB' or pfx2:PmtTpInf/pfx2:LclInstrm/pfx2:Prtry='IPIDEB')"/>
									<xsl:otherwise>
										<xsl:if test="./pfx2:PmtId/pfx2:InstrId">
											<pfx3:InstrId>
												<xsl:value-of select="./pfx2:PmtId/pfx2:InstrId"/>
											</pfx3:InstrId>
										</xsl:if>
									</xsl:otherwise>
								</xsl:choose>
								<pfx3:EndToEndId>
									<xsl:value-of select="./pfx2:PmtId/pfx2:EndToEndId"/>
								</pfx3:EndToEndId>
								<pfx3:TxId>
									<xsl:value-of select="./pfx2:PmtId/pfx2:TxId"/>
								</pfx3:TxId>
								<pfx3:UETR>
									<xsl:value-of select="concat(substring(./pfx2:PmtId/pfx2:InstrId,4,8) ,&quot;-&quot; ,substring(./pfx2:PmtId/pfx2:InstrId,12,4) ,&quot;-&quot; ,&#xA;substring(./pfx2:PmtId/pfx2:InstrId,16,4) ,&quot;-&quot; ,substring(./pfx2:PmtId/pfx2:InstrId,20,4) ,&quot;-&quot; ,&#xA;substring(./pfx2:PmtId/pfx2:InstrId,24,12) )"/>
								</pfx3:UETR>
							</pfx3:PmtId>
							<pfx3:PmtTpInf>
								<xsl:if test="string-length(current()/pfx2:PmtTpInf/pfx2:SvcLvl/pfx2:Cd)>0 or string-length(current()/pfx2:PmtTpInf/pfx2:SvcLvl/pfx2:Prtry)>0">
									<xsl:for-each select="./pfx2:PmtTpInf/pfx2:SvcLvl">
										<pfx3:SvcLvl>
											<xsl:choose>
												<xsl:when test="string-length(current()/pfx2:Cd)>0">
													<pfx3:Cd>
														<xsl:value-of select="current()/pfx2:Cd"/>
													</pfx3:Cd>
												</xsl:when>
												<xsl:otherwise>
													<pfx3:Prtry>
														<xsl:value-of select="current()/pfx2:Prtry"/>
													</pfx3:Prtry>
												</xsl:otherwise>
											</xsl:choose>
										</pfx3:SvcLvl>
									</xsl:for-each>
								</xsl:if>
								<xsl:if test="string-length(current()/pfx2:PmtTpInf/pfx2:LclInstrm/pfx2:Cd)>0 or string-length(current()/pfx2:PmtTpInf/pfx2:LclInstrm/pfx2:Prtry)>0">
									<xsl:for-each select="./pfx2:PmtTpInf/pfx2:LclInstrm">
										<pfx3:LclInstrm>
											<xsl:choose>
												<xsl:when test="string-length(current()/pfx2:Cd)>0">
													<pfx3:Cd>
														<xsl:value-of select="current()/pfx2:Cd"/>
													</pfx3:Cd>
												</xsl:when>
												<xsl:otherwise>
													<pfx3:Prtry>
														<xsl:value-of select="current()/pfx2:Prtry"/>
													</pfx3:Prtry>
												</xsl:otherwise>
											</xsl:choose>
										</pfx3:LclInstrm>
									</xsl:for-each>
								</xsl:if>
								<xsl:if test="string-length(current()/pfx2:PmtTpInf/pfx2:CtgyPurp/pfx2:Cd)>0 or string-length(current()/pfx2:PmtTpInf/pfx2:CtgyPurp/pfx2:Prtry)>0">
									<xsl:for-each select="./pfx2:PmtTpInf/pfx2:CtgyPurp">
										<pfx3:CtgyPurp>
											<xsl:choose>
												<xsl:when test="string-length(current()/pfx2:Cd)>0">
													<pfx3:Cd>
														<xsl:value-of select="current()/pfx2:Cd"/>
													</pfx3:Cd>
												</xsl:when>
												<xsl:otherwise>
													<pfx3:Prtry>
														<xsl:value-of select="current()/pfx2:Prtry"/>
													</pfx3:Prtry>
												</xsl:otherwise>
											</xsl:choose>
										</pfx3:CtgyPurp>
									</xsl:for-each>
								</xsl:if>
							</pfx3:PmtTpInf>
						</pfx3:TxIdInf>
						<pfx3:InitnInf>
							<xsl:if test="exists(current()/pfx2:UltmtDbtr) and string-length(current()/pfx2:UltmtDbtr)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;ULTMTDBTR&quot;"/>
									</pfx3:ActTp>
									<pfx3:Pty>
										<xsl:if test="current()/pfx2:UltmtDbtr/pfx2:Nm">
											<pfx3:Nm>
												<xsl:value-of select="current()/pfx2:UltmtDbtr/pfx2:Nm"/>
											</pfx3:Nm>
										</xsl:if>
										<xsl:for-each select="current()/pfx2:UltmtDbtr/pfx2:PstlAdr">
											<pfx3:PstlAdr>
												<xsl:if test="pfx2:StrtNm">
													<pfx3:StrtNm>
														<xsl:value-of select="pfx2:StrtNm"/>
													</pfx3:StrtNm>
												</xsl:if>
												<xsl:if test="pfx2:BldgNb">
													<pfx3:BldgNb>
														<xsl:value-of select="pfx2:BldgNb"/>
													</pfx3:BldgNb>
												</xsl:if>
												<xsl:if test="pfx2:PstCd">
													<pfx3:PstCd>
														<xsl:value-of select="pfx2:PstCd"/>
													</pfx3:PstCd>
												</xsl:if>
												<xsl:if test="pfx2:TwnNm">
													<pfx3:TwnNm>
														<xsl:value-of select="pfx2:TwnNm"/>
													</pfx3:TwnNm>
												</xsl:if>
												<xsl:if test="pfx2:Ctry">
													<pfx3:Ctry>
														<xsl:value-of select="pfx2:Ctry"/>
													</pfx3:Ctry>
												</xsl:if>
												<xsl:for-each select="pfx2:AdrLine">
													<pfx3:AdrLine>
														<xsl:value-of select="."/>
													</pfx3:AdrLine>
												</xsl:for-each>
											</pfx3:PstlAdr>
										</xsl:for-each>
										<xsl:for-each select="current()/pfx2:UltmtDbtr/pfx2:Id">
											<pfx3:Id>
												<xsl:choose>
													<xsl:when test="string-length(current()/pfx2:OrgId)>0">
														<pfx3:OrgId>
															<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																<pfx3:AnyBIC>
																	<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																</pfx3:AnyBIC>
															</xsl:if>
															<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:OrgId>
													</xsl:when>
													<xsl:otherwise>
														<pfx3:PrvtId>
															<pfx3:DtAndPlcOfBirth>
																<pfx3:BirthDt>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																</pfx3:BirthDt>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																	<pfx3:PrvcOfBirth>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																	</pfx3:PrvcOfBirth>
																</xsl:if>
																<pfx3:CityOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																</pfx3:CityOfBirth>
																<pfx3:CtryOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																</pfx3:CtryOfBirth>
															</pfx3:DtAndPlcOfBirth>
															<pfx3:Othr>
																<pfx3:Id>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Id"/>
																</pfx3:Id>
																<xsl:if test="string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry)>0">
																	<pfx3:SchmeNm>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0">
																				<pfx3:Cd>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd"/>
																				</pfx3:Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<pfx3:Prtry>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry"/>
																				</pfx3:Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</pfx3:SchmeNm>
																</xsl:if>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Issr">
																	<pfx3:Issr>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Issr"/>
																	</pfx3:Issr>
																</xsl:if>
															</pfx3:Othr>
														</pfx3:PrvtId>
													</xsl:otherwise>
												</xsl:choose>
											</pfx3:Id>
										</xsl:for-each>
									</pfx3:Pty>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(current()/pfx2:Dbtr)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;DBTR&quot;"/>
									</pfx3:ActTp>
									<pfx3:Pty>
										<xsl:if test="current()/pfx2:Dbtr/pfx2:Nm">
											<pfx3:Nm>
												<xsl:value-of select="current()/pfx2:Dbtr/pfx2:Nm"/>
											</pfx3:Nm>
										</xsl:if>
										<xsl:for-each select="current()/pfx2:Dbtr/pfx2:PstlAdr">
											<pfx3:PstlAdr>
												<xsl:if test="pfx2:StrtNm">
													<pfx3:StrtNm>
														<xsl:value-of select="pfx2:StrtNm"/>
													</pfx3:StrtNm>
												</xsl:if>
												<xsl:if test="pfx2:BldgNb">
													<pfx3:BldgNb>
														<xsl:value-of select="pfx2:BldgNb"/>
													</pfx3:BldgNb>
												</xsl:if>
												<xsl:if test="pfx2:PstCd">
													<pfx3:PstCd>
														<xsl:value-of select="pfx2:PstCd"/>
													</pfx3:PstCd>
												</xsl:if>
												<xsl:if test="pfx2:TwnNm">
													<pfx3:TwnNm>
														<xsl:value-of select="pfx2:TwnNm"/>
													</pfx3:TwnNm>
												</xsl:if>
												<xsl:if test="pfx2:Ctry">
													<pfx3:Ctry>
														<xsl:value-of select="pfx2:Ctry"/>
													</pfx3:Ctry>
												</xsl:if>
												<xsl:for-each select="pfx2:AdrLine">
													<pfx3:AdrLine>
														<xsl:value-of select="."/>
													</pfx3:AdrLine>
												</xsl:for-each>
											</pfx3:PstlAdr>
										</xsl:for-each>
										<xsl:for-each select="current()/pfx2:Dbtr/pfx2:Id">
											<pfx3:Id>
												<xsl:choose>
													<xsl:when test="string-length(current()/pfx2:OrgId)>0">
														<pfx3:OrgId>
															<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																<pfx3:AnyBIC>
																	<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																</pfx3:AnyBIC>
															</xsl:if>
															<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:OrgId>
													</xsl:when>
													<xsl:otherwise>
														<pfx3:PrvtId>
															<pfx3:DtAndPlcOfBirth>
																<pfx3:BirthDt>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																</pfx3:BirthDt>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																	<pfx3:PrvcOfBirth>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																	</pfx3:PrvcOfBirth>
																</xsl:if>
																<pfx3:CityOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																</pfx3:CityOfBirth>
																<pfx3:CtryOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																</pfx3:CtryOfBirth>
															</pfx3:DtAndPlcOfBirth>
															<xsl:for-each select="current()/pfx2:PrvtId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:PrvtId>
													</xsl:otherwise>
												</xsl:choose>
											</pfx3:Id>
										</xsl:for-each>
									</pfx3:Pty>
									<xsl:if test="exists(current()/pfx2:DbtrAcct) and string-length(current()/pfx2:DbtrAcct)>0">
										<pfx3:Acct>
											<pfx3:CashAcct>
												<xsl:if test="string-length(current()/pfx2:DbtrAcct/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:DbtrAcct/pfx2:Id/pfx2:Othr/pfx2:Id)>0">
													<xsl:for-each select="current()/pfx2:DbtrAcct/pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
											</pfx3:CashAcct>
										</pfx3:Acct>
									</xsl:if>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(current()/pfx2:Cdtr)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;CDTR&quot;"/>
									</pfx3:ActTp>
									<pfx3:Pty>
										<xsl:if test="current()/pfx2:Cdtr/pfx2:Nm">
											<pfx3:Nm>
												<xsl:value-of select="current()/pfx2:Cdtr/pfx2:Nm"/>
											</pfx3:Nm>
										</xsl:if>
										<xsl:for-each select="current()/pfx2:Cdtr/pfx2:PstlAdr">
											<pfx3:PstlAdr>
												<xsl:if test="pfx2:StrtNm">
													<pfx3:StrtNm>
														<xsl:value-of select="pfx2:StrtNm"/>
													</pfx3:StrtNm>
												</xsl:if>
												<xsl:if test="pfx2:BldgNb">
													<pfx3:BldgNb>
														<xsl:value-of select="pfx2:BldgNb"/>
													</pfx3:BldgNb>
												</xsl:if>
												<xsl:if test="pfx2:PstCd">
													<pfx3:PstCd>
														<xsl:value-of select="pfx2:PstCd"/>
													</pfx3:PstCd>
												</xsl:if>
												<xsl:if test="pfx2:TwnNm">
													<pfx3:TwnNm>
														<xsl:value-of select="pfx2:TwnNm"/>
													</pfx3:TwnNm>
												</xsl:if>
												<xsl:if test="pfx2:Ctry">
													<pfx3:Ctry>
														<xsl:value-of select="pfx2:Ctry"/>
													</pfx3:Ctry>
												</xsl:if>
												<xsl:for-each select="pfx2:AdrLine">
													<pfx3:AdrLine>
														<xsl:value-of select="."/>
													</pfx3:AdrLine>
												</xsl:for-each>
											</pfx3:PstlAdr>
										</xsl:for-each>
										<xsl:for-each select="current()/pfx2:Cdtr/pfx2:Id">
											<pfx3:Id>
												<xsl:choose>
													<xsl:when test="string-length(current()/pfx2:OrgId)>0">
														<pfx3:OrgId>
															<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																<pfx3:AnyBIC>
																	<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																</pfx3:AnyBIC>
															</xsl:if>
															<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:OrgId>
													</xsl:when>
													<xsl:otherwise>
														<pfx3:PrvtId>
															<pfx3:DtAndPlcOfBirth>
																<pfx3:BirthDt>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																</pfx3:BirthDt>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																	<pfx3:PrvcOfBirth>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																	</pfx3:PrvcOfBirth>
																</xsl:if>
																<pfx3:CityOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																</pfx3:CityOfBirth>
																<pfx3:CtryOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																</pfx3:CtryOfBirth>
															</pfx3:DtAndPlcOfBirth>
															<xsl:for-each select="current()/pfx2:PrvtId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:PrvtId>
													</xsl:otherwise>
												</xsl:choose>
											</pfx3:Id>
										</xsl:for-each>
									</pfx3:Pty>
									<xsl:if test="exists(current()/pfx2:CdtrAcct) and string-length(current()/pfx2:CdtrAcct)>0">
										<pfx3:Acct>
											<pfx3:CashAcct>
												<xsl:if test="string-length(current()/pfx2:CdtrAcct/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:CdtrAcct/pfx2:Id/pfx2:Othr)>0">
													<xsl:for-each select="current()/pfx2:CdtrAcct/pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																		<xsl:if test="string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry)>0">
																			<xsl:for-each select="current()/pfx2:Othr/pfx2:SchmeNm">
																				<pfx3:SchmeNm>
																					<xsl:choose>
																						<xsl:when test="string-length(current()/pfx2:Cd)>0">
																							<pfx3:Cd>
																								<xsl:value-of select="current()/pfx2:Cd"/>
																							</pfx3:Cd>
																						</xsl:when>
																						<xsl:otherwise>
																							<pfx3:Prtry>
																								<xsl:value-of select="current()/pfx2:Prtry"/>
																							</pfx3:Prtry>
																						</xsl:otherwise>
																					</xsl:choose>
																				</pfx3:SchmeNm>
																			</xsl:for-each>
																		</xsl:if>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
											</pfx3:CashAcct>
										</pfx3:Acct>
									</xsl:if>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="exists(current()/pfx2:UltmtCdtr) and string-length(current()/pfx2:UltmtCdtr)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;ULTMTCDTR&quot;"/>
									</pfx3:ActTp>
									<pfx3:Pty>
										<xsl:if test="current()/pfx2:UltmtCdtr/pfx2:Nm">
											<pfx3:Nm>
												<xsl:value-of select="current()/pfx2:UltmtCdtr/pfx2:Nm"/>
											</pfx3:Nm>
										</xsl:if>
										<xsl:for-each select="current()/pfx2:UltmtCdtr/pfx2:PstlAdr">
											<pfx3:PstlAdr>
												<xsl:if test="pfx2:StrtNm">
													<pfx3:StrtNm>
														<xsl:value-of select="pfx2:StrtNm"/>
													</pfx3:StrtNm>
												</xsl:if>
												<xsl:if test="pfx2:BldgNb">
													<pfx3:BldgNb>
														<xsl:value-of select="pfx2:BldgNb"/>
													</pfx3:BldgNb>
												</xsl:if>
												<xsl:if test="pfx2:PstCd">
													<pfx3:PstCd>
														<xsl:value-of select="pfx2:PstCd"/>
													</pfx3:PstCd>
												</xsl:if>
												<xsl:if test="pfx2:TwnNm">
													<pfx3:TwnNm>
														<xsl:value-of select="pfx2:TwnNm"/>
													</pfx3:TwnNm>
												</xsl:if>
												<xsl:if test="pfx2:Ctry">
													<pfx3:Ctry>
														<xsl:value-of select="pfx2:Ctry"/>
													</pfx3:Ctry>
												</xsl:if>
												<xsl:for-each select="pfx2:AdrLine">
													<pfx3:AdrLine>
														<xsl:value-of select="."/>
													</pfx3:AdrLine>
												</xsl:for-each>
											</pfx3:PstlAdr>
										</xsl:for-each>
										<xsl:for-each select="current()/pfx2:UltmtCdtr/pfx2:Id">
											<pfx3:Id>
												<xsl:choose>
													<xsl:when test="string-length(current()/pfx2:OrgId)>0">
														<pfx3:OrgId>
															<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																<pfx3:AnyBIC>
																	<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																</pfx3:AnyBIC>
															</xsl:if>
															<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																<pfx3:Othr>
																	<pfx3:Id>
																		<xsl:value-of select="pfx2:Id"/>
																	</pfx3:Id>
																	<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																		<xsl:for-each select="pfx2:SchmeNm">
																			<pfx3:SchmeNm>
																				<xsl:choose>
																					<xsl:when test="string-length(current()/pfx2:Cd)>0">
																						<pfx3:Cd>
																							<xsl:value-of select="current()/pfx2:Cd"/>
																						</pfx3:Cd>
																					</xsl:when>
																					<xsl:otherwise>
																						<pfx3:Prtry>
																							<xsl:value-of select="current()/pfx2:Prtry"/>
																						</pfx3:Prtry>
																					</xsl:otherwise>
																				</xsl:choose>
																			</pfx3:SchmeNm>
																		</xsl:for-each>
																	</xsl:if>
																	<xsl:if test="pfx2:Issr">
																		<pfx3:Issr>
																			<xsl:value-of select="pfx2:Issr"/>
																		</pfx3:Issr>
																	</xsl:if>
																</pfx3:Othr>
															</xsl:for-each>
														</pfx3:OrgId>
													</xsl:when>
													<xsl:otherwise>
														<pfx3:PrvtId>
															<pfx3:DtAndPlcOfBirth>
																<pfx3:BirthDt>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																</pfx3:BirthDt>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																	<pfx3:PrvcOfBirth>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																	</pfx3:PrvcOfBirth>
																</xsl:if>
																<pfx3:CityOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																</pfx3:CityOfBirth>
																<pfx3:CtryOfBirth>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																</pfx3:CtryOfBirth>
															</pfx3:DtAndPlcOfBirth>
															<pfx3:Othr>
																<pfx3:Id>
																	<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Id"/>
																</pfx3:Id>
																<xsl:if test="string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry)>0">
																	<pfx3:SchmeNm>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0">
																				<pfx3:Cd>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd"/>
																				</pfx3:Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<pfx3:Prtry>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry"/>
																				</pfx3:Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</pfx3:SchmeNm>
																</xsl:if>
																<xsl:if test="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Issr">
																	<pfx3:Issr>
																		<xsl:value-of select="current()/pfx2:PrvtId/pfx2:Othr/pfx2:Issr"/>
																	</pfx3:Issr>
																</xsl:if>
															</pfx3:Othr>
														</pfx3:PrvtId>
													</xsl:otherwise>
												</xsl:choose>
											</pfx3:Id>
										</xsl:for-each>
									</pfx3:Pty>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="exists(./pfx2:InstdAmt)">
								<pfx3:AmtInf>
									<pfx3:Amt>
										<pfx3:InstdAmt>
											<xsl:attribute name="Ccy">
												<xsl:value-of select="./pfx2:InstdAmt/@Ccy"/>
											</xsl:attribute>
											<xsl:value-of select="./pfx2:InstdAmt"/>
										</pfx3:InstdAmt>
									</pfx3:Amt>
									<pfx3:XchgRateInf>
										<xsl:if test="./pfx2:XchgRate">
											<pfx3:XchgRate>
												<xsl:value-of select="./pfx2:XchgRate"/>
											</pfx3:XchgRate>
										</xsl:if>
									</pfx3:XchgRateInf>
								</pfx3:AmtInf>
							</xsl:if>
							<pfx3:OthrInf>
								<xsl:for-each select="./pfx2:InstrForCdtrAgt">
									<pfx3:InstrForCdtrAgt>
										<xsl:if test="pfx2:Cd">
											<pfx3:Cd>
												<xsl:value-of select="pfx2:Cd"/>
											</pfx3:Cd>
										</xsl:if>
										<xsl:if test="pfx2:InstrInf">
											<pfx3:InstrInf>
												<xsl:value-of select="pfx2:InstrInf"/>
											</pfx3:InstrInf>
										</xsl:if>
									</pfx3:InstrForCdtrAgt>
								</xsl:for-each>
								<xsl:for-each select="./pfx2:RgltryRptg">
									<pfx3:RgltryRptg>
										<xsl:for-each select="pfx2:Dtls">
											<pfx3:Dtls>
												<xsl:for-each select="pfx2:Inf">
													<pfx3:Inf>
														<xsl:value-of select="."/>
													</pfx3:Inf>
												</xsl:for-each>
											</pfx3:Dtls>
										</xsl:for-each>
									</pfx3:RgltryRptg>
								</xsl:for-each>
								<xsl:for-each select="current()/pfx2:RmtInf">
									<pfx3:RmtInf>
										<xsl:for-each select="pfx2:Ustrd">
											<pfx3:Ustrd>
												<xsl:value-of select="."/>
											</pfx3:Ustrd>
										</xsl:for-each>
										<xsl:for-each select="pfx2:Strd">
											<pfx3:Strd>
												<xsl:for-each select="pfx2:RfrdDocInf">
													<pfx3:RfrdDocInf>
														<xsl:for-each select="pfx2:Tp">
															<pfx3:Tp>
																<xsl:for-each select="pfx2:CdOrPrtry">
																	<pfx3:CdOrPrtry>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:Cd)>0">
																				<pfx3:Cd>
																					<xsl:value-of select="current()/pfx2:Cd"/>
																				</pfx3:Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<pfx3:Prtry>
																					<xsl:value-of select="current()/pfx2:Prtry"/>
																				</pfx3:Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</pfx3:CdOrPrtry>
																</xsl:for-each>
															</pfx3:Tp>
														</xsl:for-each>
														<pfx3:Nb>
															<xsl:value-of select="pfx2:Nb"/>
														</pfx3:Nb>
														<pfx3:RltdDt>
															<xsl:value-of select="pfx2:RltdDt"/>
														</pfx3:RltdDt>
													</pfx3:RfrdDocInf>
												</xsl:for-each>
												<xsl:for-each select="pfx2:RfrdDocAmt">
													<pfx3:RfrdDocAmt>
														<xsl:if test="pfx2:DuePyblAmt">
															<pfx3:DuePyblAmt>
																<xsl:attribute name="Ccy">
																	<xsl:value-of select="pfx2:DuePyblAmt/@Ccy"/>
																</xsl:attribute>
																<xsl:value-of select="pfx2:DuePyblAmt"/>
															</pfx3:DuePyblAmt>
														</xsl:if>
														<pfx3:DscntApldAmt>
															<pfx3:Amt>
																<xsl:attribute name="Ccy">
																	<xsl:value-of select="current()/pfx2:DscntApldAmt/@Ccy"/>
																</xsl:attribute>
																<xsl:value-of select="current()/pfx2:DscntApldAmt"/>
															</pfx3:Amt>
														</pfx3:DscntApldAmt>
														<xsl:if test="pfx2:CdtNoteAmt">
															<pfx3:CdtNoteAmt>
																<xsl:attribute name="Ccy">
																	<xsl:value-of select="pfx2:CdtNoteAmt/@Ccy"/>
																</xsl:attribute>
																<xsl:value-of select="pfx2:CdtNoteAmt"/>
															</pfx3:CdtNoteAmt>
														</xsl:if>
														<pfx3:TaxAmt>
															<pfx3:Amt>
																<xsl:attribute name="Ccy">
																	<xsl:value-of select="current()/pfx2:TaxAmt/@Ccy"/>
																</xsl:attribute>
																<xsl:value-of select="current()/pfx2:TaxAmt"/>
															</pfx3:Amt>
														</pfx3:TaxAmt>
														<xsl:for-each select="pfx2:AdjstmntAmtAndRsn">
															<pfx3:AdjstmntAmtAndRsn>
																<pfx3:Amt>
																	<xsl:attribute name="Ccy">
																		<xsl:value-of select="pfx2:Amt/@Ccy"/>
																	</xsl:attribute>
																	<xsl:value-of select="pfx2:Amt"/>
																</pfx3:Amt>
																<xsl:if test="pfx2:CdtDbtInd">
																	<pfx3:CdtDbtInd>
																		<xsl:value-of select="pfx2:CdtDbtInd"/>
																	</pfx3:CdtDbtInd>
																</xsl:if>
																<xsl:if test="pfx2:Rsn">
																	<pfx3:Rsn>
																		<xsl:value-of select="pfx2:Rsn"/>
																	</pfx3:Rsn>
																</xsl:if>
																<xsl:if test="pfx2:AddtlInf">
																	<pfx3:AddtlInf>
																		<xsl:value-of select="pfx2:AddtlInf"/>
																	</pfx3:AddtlInf>
																</xsl:if>
															</pfx3:AdjstmntAmtAndRsn>
														</xsl:for-each>
														<xsl:if test="pfx2:RmtdAmt">
															<pfx3:RmtdAmt>
																<xsl:attribute name="Ccy">
																	<xsl:value-of select="pfx2:RmtdAmt/@Ccy"/>
																</xsl:attribute>
																<xsl:value-of select="pfx2:RmtdAmt"/>
															</pfx3:RmtdAmt>
														</xsl:if>
													</pfx3:RfrdDocAmt>
												</xsl:for-each>
												<xsl:for-each select="pfx2:CdtrRefInf">
													<pfx3:CdtrRefInf>
														<xsl:for-each select="pfx2:Tp">
															<pfx3:Tp>
																<xsl:for-each select="pfx2:CdOrPrtry">
																	<pfx3:CdOrPrtry>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:Cd)>0">
																				<pfx3:Cd>
																					<xsl:value-of select="current()/pfx2:Cd"/>
																				</pfx3:Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<pfx3:Prtry>
																					<xsl:value-of select="current()/pfx2:Prtry"/>
																				</pfx3:Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</pfx3:CdOrPrtry>
																</xsl:for-each>
																<xsl:if test="pfx2:Issr">
																	<pfx3:Issr>
																		<xsl:value-of select="pfx2:Issr"/>
																	</pfx3:Issr>
																</xsl:if>
															</pfx3:Tp>
														</xsl:for-each>
														<pfx3:Ref>
															<xsl:value-of select="pfx2:Ref"/>
														</pfx3:Ref>
													</pfx3:CdtrRefInf>
												</xsl:for-each>
												<xsl:for-each select="pfx2:Invcr">
													<pfx3:Invcr>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<xsl:if test="pfx2:Dept">
																	<pfx3:Dept>
																		<xsl:value-of select="pfx2:Dept"/>
																	</pfx3:Dept>
																</xsl:if>
																<xsl:if test="pfx2:SubDept">
																	<pfx3:SubDept>
																		<xsl:value-of select="pfx2:SubDept"/>
																	</pfx3:SubDept>
																</xsl:if>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:CtrySubDvsn">
																	<pfx3:CtrySubDvsn>
																		<xsl:value-of select="pfx2:CtrySubDvsn"/>
																	</pfx3:CtrySubDvsn>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
														<xsl:for-each select="pfx2:Id">
															<pfx3:Id>
																<xsl:choose>
																	<xsl:when test="string-length(current()/pfx2:OrgId)>0">
																		<pfx3:OrgId>
																			<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																				<pfx3:AnyBIC>
																					<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																				</pfx3:AnyBIC>
																			</xsl:if>
																			<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																				<pfx3:Othr>
																					<pfx3:Id>
																						<xsl:value-of select="pfx2:Id"/>
																					</pfx3:Id>
																					<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																						<xsl:for-each select="pfx2:SchmeNm">
																							<pfx3:SchmeNm>
																								<xsl:choose>
																									<xsl:when test="string-length(current()/pfx2:Cd)>0">
																										<pfx3:Cd>
																											<xsl:value-of select="current()/pfx2:Cd"/>
																										</pfx3:Cd>
																									</xsl:when>
																									<xsl:otherwise>
																										<pfx3:Prtry>
																											<xsl:value-of select="current()/pfx2:Prtry"/>
																										</pfx3:Prtry>
																									</xsl:otherwise>
																								</xsl:choose>
																							</pfx3:SchmeNm>
																						</xsl:for-each>
																					</xsl:if>
																					<xsl:if test="pfx2:Issr">
																						<pfx3:Issr>
																							<xsl:value-of select="pfx2:Issr"/>
																						</pfx3:Issr>
																					</xsl:if>
																				</pfx3:Othr>
																			</xsl:for-each>
																		</pfx3:OrgId>
																	</xsl:when>
																	<xsl:otherwise>
																		<pfx3:PrvtId>
																			<pfx3:DtAndPlcOfBirth>
																				<pfx3:BirthDt>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																				</pfx3:BirthDt>
																				<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																					<pfx3:PrvcOfBirth>
																						<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																					</pfx3:PrvcOfBirth>
																				</xsl:if>
																				<pfx3:CityOfBirth>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																				</pfx3:CityOfBirth>
																				<pfx3:CtryOfBirth>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																				</pfx3:CtryOfBirth>
																			</pfx3:DtAndPlcOfBirth>
																			<xsl:for-each select="current()/pfx2:PrvtId/pfx2:Othr">
																				<pfx3:Othr>
																					<pfx3:Id>
																						<xsl:value-of select="current()/pfx2:Id"/>
																					</pfx3:Id>
																					<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																						<pfx3:SchmeNm>
																							<xsl:choose>
																								<xsl:when test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0">
																									<pfx3:Cd>
																										<xsl:value-of select="current()/pfx2:SchmeNm/pfx2:Cd"/>
																									</pfx3:Cd>
																								</xsl:when>
																								<xsl:otherwise>
																									<pfx3:Prtry>
																										<xsl:value-of select="current()/pfx2:SchmeNm/pfx2:Prtry"/>
																									</pfx3:Prtry>
																								</xsl:otherwise>
																							</xsl:choose>
																						</pfx3:SchmeNm>
																					</xsl:if>
																					<xsl:if test="current()/pfx2:Issr">
																						<pfx3:Issr>
																							<xsl:value-of select="current()/pfx2:Issr"/>
																						</pfx3:Issr>
																					</xsl:if>
																				</pfx3:Othr>
																			</xsl:for-each>
																		</pfx3:PrvtId>
																	</xsl:otherwise>
																</xsl:choose>
															</pfx3:Id>
														</xsl:for-each>
														<xsl:if test="pfx2:CtryOfRes">
															<pfx3:CtryOfRes>
																<xsl:value-of select="pfx2:CtryOfRes"/>
															</pfx3:CtryOfRes>
														</xsl:if>
														<xsl:for-each select="pfx2:CtctDtls">
															<pfx3:CtctDtls>
																<xsl:if test="pfx2:NmPrfx">
																	<pfx3:NmPrfx>
																		<xsl:value-of select="pfx2:NmPrfx"/>
																	</pfx3:NmPrfx>
																</xsl:if>
																<xsl:if test="pfx2:Nm">
																	<pfx3:Nm>
																		<xsl:value-of select="pfx2:Nm"/>
																	</pfx3:Nm>
																</xsl:if>
																<xsl:if test="pfx2:PhneNb">
																	<pfx3:PhneNb>
																		<xsl:value-of select="pfx2:PhneNb"/>
																	</pfx3:PhneNb>
																</xsl:if>
																<xsl:if test="pfx2:MobNb">
																	<pfx3:MobNb>
																		<xsl:value-of select="pfx2:MobNb"/>
																	</pfx3:MobNb>
																</xsl:if>
																<xsl:if test="pfx2:FaxNb">
																	<pfx3:FaxNb>
																		<xsl:value-of select="pfx2:FaxNb"/>
																	</pfx3:FaxNb>
																</xsl:if>
																<xsl:if test="pfx2:EmailAdr">
																	<pfx3:EmailAdr>
																		<xsl:value-of select="pfx2:EmailAdr"/>
																	</pfx3:EmailAdr>
																</xsl:if>
															</pfx3:CtctDtls>
														</xsl:for-each>
													</pfx3:Invcr>
												</xsl:for-each>
												<xsl:for-each select="pfx2:Invcee">
													<pfx3:Invcee>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<xsl:if test="pfx2:Dept">
																	<pfx3:Dept>
																		<xsl:value-of select="pfx2:Dept"/>
																	</pfx3:Dept>
																</xsl:if>
																<xsl:if test="pfx2:SubDept">
																	<pfx3:SubDept>
																		<xsl:value-of select="pfx2:SubDept"/>
																	</pfx3:SubDept>
																</xsl:if>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:CtrySubDvsn">
																	<pfx3:CtrySubDvsn>
																		<xsl:value-of select="pfx2:CtrySubDvsn"/>
																	</pfx3:CtrySubDvsn>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
														<xsl:for-each select="pfx2:Id">
															<pfx3:Id>
																<xsl:choose>
																	<xsl:when test="string-length(current()/pfx2:OrgId)>0">
																		<pfx3:OrgId>
																			<xsl:if test="current()/pfx2:OrgId/pfx2:BICOrBEI">
																				<pfx3:AnyBIC>
																					<xsl:value-of select="current()/pfx2:OrgId/pfx2:BICOrBEI"/>
																				</pfx3:AnyBIC>
																			</xsl:if>
																			<xsl:for-each select="current()/pfx2:OrgId/pfx2:Othr">
																				<pfx3:Othr>
																					<pfx3:Id>
																						<xsl:value-of select="pfx2:Id"/>
																					</pfx3:Id>
																					<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																						<xsl:for-each select="pfx2:SchmeNm">
																							<pfx3:SchmeNm>
																								<xsl:choose>
																									<xsl:when test="string-length(current()/pfx2:Cd)>0">
																										<pfx3:Cd>
																											<xsl:value-of select="current()/pfx2:Cd"/>
																										</pfx3:Cd>
																									</xsl:when>
																									<xsl:otherwise>
																										<pfx3:Prtry>
																											<xsl:value-of select="current()/pfx2:Prtry"/>
																										</pfx3:Prtry>
																									</xsl:otherwise>
																								</xsl:choose>
																							</pfx3:SchmeNm>
																						</xsl:for-each>
																					</xsl:if>
																					<xsl:if test="pfx2:Issr">
																						<pfx3:Issr>
																							<xsl:value-of select="pfx2:Issr"/>
																						</pfx3:Issr>
																					</xsl:if>
																				</pfx3:Othr>
																			</xsl:for-each>
																		</pfx3:OrgId>
																	</xsl:when>
																	<xsl:otherwise>
																		<pfx3:PrvtId>
																			<pfx3:DtAndPlcOfBirth>
																				<pfx3:BirthDt>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:BirthDt"/>
																				</pfx3:BirthDt>
																				<xsl:if test="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth">
																					<pfx3:PrvcOfBirth>
																						<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:PrvcOfBirth"/>
																					</pfx3:PrvcOfBirth>
																				</xsl:if>
																				<pfx3:CityOfBirth>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CityOfBirth"/>
																				</pfx3:CityOfBirth>
																				<pfx3:CtryOfBirth>
																					<xsl:value-of select="current()/pfx2:PrvtId/pfx2:DtAndPlcOfBirth/pfx2:CtryOfBirth"/>
																				</pfx3:CtryOfBirth>
																			</pfx3:DtAndPlcOfBirth>
																			<xsl:for-each select="current()/pfx2:PrvtId/pfx2:Othr">
																				<pfx3:Othr>
																					<pfx3:Id>
																						<xsl:value-of select="current()/pfx2:Id"/>
																					</pfx3:Id>
																					<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																						<pfx3:SchmeNm>
																							<xsl:choose>
																								<xsl:when test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0">
																									<pfx3:Cd>
																										<xsl:value-of select="current()/pfx2:SchmeNm/pfx2:Cd"/>
																									</pfx3:Cd>
																								</xsl:when>
																								<xsl:otherwise>
																									<pfx3:Prtry>
																										<xsl:value-of select="current()/pfx2:SchmeNm/pfx2:Prtry"/>
																									</pfx3:Prtry>
																								</xsl:otherwise>
																							</xsl:choose>
																						</pfx3:SchmeNm>
																					</xsl:if>
																					<xsl:if test="current()/pfx2:Issr">
																						<pfx3:Issr>
																							<xsl:value-of select="current()/pfx2:Issr"/>
																						</pfx3:Issr>
																					</xsl:if>
																				</pfx3:Othr>
																			</xsl:for-each>
																		</pfx3:PrvtId>
																	</xsl:otherwise>
																</xsl:choose>
															</pfx3:Id>
														</xsl:for-each>
														<xsl:if test="pfx2:CtryOfRes">
															<pfx3:CtryOfRes>
																<xsl:value-of select="pfx2:CtryOfRes"/>
															</pfx3:CtryOfRes>
														</xsl:if>
														<xsl:for-each select="pfx2:CtctDtls">
															<pfx3:CtctDtls>
																<xsl:if test="pfx2:NmPrfx">
																	<pfx3:NmPrfx>
																		<xsl:value-of select="pfx2:NmPrfx"/>
																	</pfx3:NmPrfx>
																</xsl:if>
																<xsl:if test="pfx2:Nm">
																	<pfx3:Nm>
																		<xsl:value-of select="pfx2:Nm"/>
																	</pfx3:Nm>
																</xsl:if>
																<xsl:if test="pfx2:PhneNb">
																	<pfx3:PhneNb>
																		<xsl:value-of select="pfx2:PhneNb"/>
																	</pfx3:PhneNb>
																</xsl:if>
																<xsl:if test="pfx2:MobNb">
																	<pfx3:MobNb>
																		<xsl:value-of select="pfx2:MobNb"/>
																	</pfx3:MobNb>
																</xsl:if>
																<xsl:if test="pfx2:FaxNb">
																	<pfx3:FaxNb>
																		<xsl:value-of select="pfx2:FaxNb"/>
																	</pfx3:FaxNb>
																</xsl:if>
																<xsl:if test="pfx2:EmailAdr">
																	<pfx3:EmailAdr>
																		<xsl:value-of select="pfx2:EmailAdr"/>
																	</pfx3:EmailAdr>
																</xsl:if>
															</pfx3:CtctDtls>
														</xsl:for-each>
													</pfx3:Invcee>
												</xsl:for-each>
												<xsl:for-each select="pfx2:AddtlRmtInf">
													<pfx3:AddtlRmtInf>
														<xsl:value-of select="."/>
													</pfx3:AddtlRmtInf>
												</xsl:for-each>
											</pfx3:Strd>
										</xsl:for-each>
									</pfx3:RmtInf>
								</xsl:for-each>
								<xsl:for-each select="current()/pfx2:Purp">
									<pfx3:Purp>
										<xsl:choose>
											<xsl:when test="string-length(current()/pfx2:Cd)>0">
												<pfx3:Cd>
													<xsl:value-of select="current()/pfx2:Cd"/>
												</pfx3:Cd>
											</xsl:when>
											<xsl:otherwise>
												<pfx3:Prtry>
													<xsl:value-of select="current()/pfx2:Prtry"/>
												</pfx3:Prtry>
											</xsl:otherwise>
										</xsl:choose>
									</pfx3:Purp>
								</xsl:for-each>
							</pfx3:OthrInf>
						</pfx3:InitnInf>
						<pfx3:ChrgInf>
							<pfx3:ChrgBr>
								<xsl:value-of select="current()/pfx2:ChrgBr"/>
							</pfx3:ChrgBr>
							<xsl:for-each select="current()/pfx2:ChrgsInf">
								<pfx3:ChrgsInf>
									<pfx3:Amt>
										<xsl:attribute name="Ccy">
											<xsl:value-of select="pfx2:Amt/@Ccy"/>
										</xsl:attribute>
										<xsl:value-of select="pfx2:Amt"/>
									</pfx3:Amt>
									<xsl:for-each select="./pfx2:ChrgsInf/pfx2:Pty">
										<pfx3:Agt>
											<xsl:for-each select="pfx2:FinInstnId">
												<pfx3:FinInstnId>
													<xsl:if test="current()/pfx2:BIC">
														<pfx3:BICFI>
															<xsl:value-of select="current()/pfx2:BIC"/>
														</pfx3:BICFI>
													</xsl:if>
													<xsl:for-each select="pfx2:ClrSysMmbId">
														<pfx3:ClrSysMmbId>
															<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
																<xsl:for-each select="pfx2:ClrSysId">
																	<pfx3:ClrSysId>
																		<xsl:choose>
																			<xsl:when test="string-length(current()/pfx2:Cd)>0">
																				<pfx3:Cd>
																					<xsl:value-of select="current()/pfx2:Cd"/>
																				</pfx3:Cd>
																			</xsl:when>
																			<xsl:otherwise>
																				<pfx3:Prtry>
																					<xsl:value-of select="current()/pfx2:Prtry"/>
																				</pfx3:Prtry>
																			</xsl:otherwise>
																		</xsl:choose>
																	</pfx3:ClrSysId>
																</xsl:for-each>
															</xsl:if>
															<pfx3:MmbId>
																<xsl:value-of select="pfx2:MmbId"/>
															</pfx3:MmbId>
														</pfx3:ClrSysMmbId>
													</xsl:for-each>
													<xsl:if test="pfx2:Nm">
														<pfx3:Nm>
															<xsl:value-of select="pfx2:Nm"/>
														</pfx3:Nm>
													</xsl:if>
													<xsl:for-each select="pfx2:PstlAdr">
														<pfx3:PstlAdr>
															<xsl:if test="pfx2:StrtNm">
																<pfx3:StrtNm>
																	<xsl:value-of select="pfx2:StrtNm"/>
																</pfx3:StrtNm>
															</xsl:if>
															<xsl:if test="pfx2:BldgNb">
																<pfx3:BldgNb>
																	<xsl:value-of select="pfx2:BldgNb"/>
																</pfx3:BldgNb>
															</xsl:if>
															<xsl:if test="pfx2:PstCd">
																<pfx3:PstCd>
																	<xsl:value-of select="pfx2:PstCd"/>
																</pfx3:PstCd>
															</xsl:if>
															<xsl:if test="pfx2:TwnNm">
																<pfx3:TwnNm>
																	<xsl:value-of select="pfx2:TwnNm"/>
																</pfx3:TwnNm>
															</xsl:if>
															<xsl:if test="pfx2:Ctry">
																<pfx3:Ctry>
																	<xsl:value-of select="pfx2:Ctry"/>
																</pfx3:Ctry>
															</xsl:if>
															<xsl:for-each select="pfx2:AdrLine">
																<pfx3:AdrLine>
																	<xsl:value-of select="."/>
																</pfx3:AdrLine>
															</xsl:for-each>
														</pfx3:PstlAdr>
													</xsl:for-each>
												</pfx3:FinInstnId>
											</xsl:for-each>
										</pfx3:Agt>
									</xsl:for-each>
								</pfx3:ChrgsInf>
							</xsl:for-each>
						</pfx3:ChrgInf>
						<pfx3:IntrBkInf>
							<pfx3:DtTmInf>
								<pfx3:IntrBkSttlmDt>
									<xsl:value-of select="../pfx2:GrpHdr/pfx2:IntrBkSttlmDt"/>
								</pfx3:IntrBkSttlmDt>
								<pfx3:SttlmTmIndctn>
									<xsl:if test="current()/pfx2:SttlmTmIndctn/pfx2:DbtDtTm">
										<pfx3:DbtDtTm>
											<xsl:value-of select="current()/pfx2:SttlmTmIndctn/pfx2:DbtDtTm"/>
										</pfx3:DbtDtTm>
									</xsl:if>
									<xsl:if test="current()/pfx2:SttlmTmIndctn/pfx2:CdtDtTm">
										<pfx3:CdtDtTm>
											<xsl:value-of select="current()/pfx2:SttlmTmIndctn/pfx2:CdtDtTm"/>
										</pfx3:CdtDtTm>
									</xsl:if>
								</pfx3:SttlmTmIndctn>
							</pfx3:DtTmInf>
							<xsl:if test="string-length(../pfx2:GrpHdr/pfx2:InstgAgt)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;INSTGAGT&quot;"/>
									</pfx3:ActTp>
									<pfx3:Agt>
										<xsl:for-each select="../pfx2:GrpHdr/pfx2:InstgAgt/pfx2:FinInstnId">
											<pfx3:FinInstnId>
												<xsl:if test="current()/pfx2:BIC">
													<pfx3:BICFI>
														<xsl:value-of select="current()/pfx2:BIC"/>
													</pfx3:BICFI>
												</xsl:if>
												<xsl:for-each select="pfx2:ClrSysMmbId">
													<pfx3:ClrSysMmbId>
														<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
															<xsl:for-each select="pfx2:ClrSysId">
																<pfx3:ClrSysId>
																	<xsl:choose>
																		<xsl:when test="string-length(current()/pfx2:Cd)>0">
																			<pfx3:Cd>
																				<xsl:value-of select="current()/pfx2:Cd"/>
																			</pfx3:Cd>
																		</xsl:when>
																		<xsl:otherwise>
																			<pfx3:Prtry>
																				<xsl:value-of select="current()/pfx2:Prtry"/>
																			</pfx3:Prtry>
																		</xsl:otherwise>
																	</xsl:choose>
																</pfx3:ClrSysId>
															</xsl:for-each>
														</xsl:if>
														<pfx3:MmbId>
															<xsl:value-of select="pfx2:MmbId"/>
														</pfx3:MmbId>
													</pfx3:ClrSysMmbId>
												</xsl:for-each>
											</pfx3:FinInstnId>
										</xsl:for-each>
									</pfx3:Agt>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(../pfx2:GrpHdr/pfx2:InstdAgt)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;INSTDAGT&quot;"/>
									</pfx3:ActTp>
									<pfx3:Agt>
										<xsl:for-each select="../pfx2:GrpHdr/pfx2:InstdAgt/pfx2:FinInstnId">
											<pfx3:FinInstnId>
												<xsl:if test="current()/pfx2:BIC">
													<pfx3:BICFI>
														<xsl:value-of select="current()/pfx2:BIC"/>
													</pfx3:BICFI>
												</xsl:if>
												<xsl:for-each select="pfx2:ClrSysMmbId">
													<pfx3:ClrSysMmbId>
														<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
															<xsl:for-each select="pfx2:ClrSysId">
																<pfx3:ClrSysId>
																	<xsl:choose>
																		<xsl:when test="string-length(current()/pfx2:Cd)>0">
																			<pfx3:Cd>
																				<xsl:value-of select="current()/pfx2:Cd"/>
																			</pfx3:Cd>
																		</xsl:when>
																		<xsl:otherwise>
																			<pfx3:Prtry>
																				<xsl:value-of select="current()/pfx2:Prtry"/>
																			</pfx3:Prtry>
																		</xsl:otherwise>
																	</xsl:choose>
																</pfx3:ClrSysId>
															</xsl:for-each>
														</xsl:if>
														<pfx3:MmbId>
															<xsl:value-of select="pfx2:MmbId"/>
														</pfx3:MmbId>
													</pfx3:ClrSysMmbId>
												</xsl:for-each>
												<xsl:for-each select="current()/pfx2:Othr">
													<pfx3:Othr>
														<pfx3:Id>
															<xsl:value-of select="pfx2:Id"/>
														</pfx3:Id>
													</pfx3:Othr>
												</xsl:for-each>
											</pfx3:FinInstnId>
										</xsl:for-each>
									</pfx3:Agt>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(current()/pfx2:IntrmyAgt1)>0 or string-length(current()/pfx2:IntrmyAgt1Acct)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;INTRMYAGT1&quot;"/>
									</pfx3:ActTp>
									<xsl:choose>
										<xsl:when test="string-length(current()/pfx2:IntrmyAgt1/pfx2:FinInstnId)>0">
											<pfx3:Agt>
												<xsl:for-each select="current()/pfx2:IntrmyAgt1/pfx2:FinInstnId">
													<pfx3:FinInstnId>
														<xsl:if test="current()/pfx2:BIC">
															<pfx3:BICFI>
																<xsl:value-of select="current()/pfx2:BIC"/>
															</pfx3:BICFI>
														</xsl:if>
														<xsl:for-each select="pfx2:ClrSysMmbId">
															<pfx3:ClrSysMmbId>
																<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
																	<xsl:for-each select="pfx2:ClrSysId">
																		<pfx3:ClrSysId>
																			<xsl:choose>
																				<xsl:when test="string-length(current()/pfx2:Cd)>0">
																					<pfx3:Cd>
																						<xsl:value-of select="current()/pfx2:Cd"/>
																					</pfx3:Cd>
																				</xsl:when>
																				<xsl:otherwise>
																					<pfx3:Prtry>
																						<xsl:value-of select="current()/pfx2:Prtry"/>
																					</pfx3:Prtry>
																				</xsl:otherwise>
																			</xsl:choose>
																		</pfx3:ClrSysId>
																	</xsl:for-each>
																</xsl:if>
																<pfx3:MmbId>
																	<xsl:value-of select="pfx2:MmbId"/>
																</pfx3:MmbId>
															</pfx3:ClrSysMmbId>
														</xsl:for-each>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
													</pfx3:FinInstnId>
												</xsl:for-each>
											</pfx3:Agt>
										</xsl:when>
										<xsl:otherwise>
											<pfx3:Agt>
												<pfx3:FinInstnId>
													<pfx3:Nm>
														<xsl:value-of select="&quot;NOTPROVIDED&quot;"/>
													</pfx3:Nm>
												</pfx3:FinInstnId>
											</pfx3:Agt>
										</xsl:otherwise>
									</xsl:choose>
									<xsl:if test="string-length(current()/pfx2:IntrmyAgt1Acct)>0">
										<pfx3:Acct>
											<pfx3:CashAcct>
												<xsl:if test="string-length(current()/pfx2:IntrmyAgt1Acct/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:IntrmyAgt1Acct/pfx2:Id/pfx2:Othr)>0">
													<xsl:for-each select="current()/pfx2:IntrmyAgt1Acct/pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
											</pfx3:CashAcct>
										</pfx3:Acct>
									</xsl:if>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(current()/pfx2:DbtrAgt)>0 or string-length(current()/pfx2:DbtrAgtAcct)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;DBTRAGT&quot;"/>
									</pfx3:ActTp>
									<xsl:choose>
										<xsl:when test="string-length(current()/pfx2:DbtrAgt/pfx2:FinInstnId)>0">
											<pfx3:Agt>
												<xsl:for-each select="current()/pfx2:DbtrAgt/pfx2:FinInstnId">
													<pfx3:FinInstnId>
														<xsl:if test="current()/pfx2:BIC">
															<pfx3:BICFI>
																<xsl:value-of select="current()/pfx2:BIC"/>
															</pfx3:BICFI>
														</xsl:if>
														<xsl:for-each select="pfx2:ClrSysMmbId">
															<pfx3:ClrSysMmbId>
																<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
																	<xsl:for-each select="pfx2:ClrSysId">
																		<pfx3:ClrSysId>
																			<xsl:choose>
																				<xsl:when test="string-length(current()/pfx2:Cd)>0">
																					<pfx3:Cd>
																						<xsl:value-of select="current()/pfx2:Cd"/>
																					</pfx3:Cd>
																				</xsl:when>
																				<xsl:otherwise>
																					<pfx3:Prtry>
																						<xsl:value-of select="current()/pfx2:Prtry"/>
																					</pfx3:Prtry>
																				</xsl:otherwise>
																			</xsl:choose>
																		</pfx3:ClrSysId>
																	</xsl:for-each>
																</xsl:if>
																<pfx3:MmbId>
																	<xsl:value-of select="pfx2:MmbId"/>
																</pfx3:MmbId>
															</pfx3:ClrSysMmbId>
														</xsl:for-each>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
													</pfx3:FinInstnId>
												</xsl:for-each>
											</pfx3:Agt>
										</xsl:when>
										<xsl:otherwise>
											<pfx3:Agt>
												<pfx3:FinInstnId>
													<pfx3:Nm>
														<xsl:value-of select="&quot;NOTPROVIDED&quot;"/>
													</pfx3:Nm>
												</pfx3:FinInstnId>
											</pfx3:Agt>
										</xsl:otherwise>
									</xsl:choose>
									<xsl:if test="string-length(current()/pfx2:DbtrAgtAcct)>0">
										<pfx3:Acct>
											<pfx3:CashAcct>
												<xsl:if test="string-length(current()/pfx2:DbtrAgtAcct/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:DbtrAgtAcct/pfx2:Id/pfx2:Othr)>0">
													<xsl:for-each select="current()/pfx2:DbtrAgtAcct/pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
											</pfx3:CashAcct>
										</pfx3:Acct>
									</xsl:if>
								</pfx3:ActInf>
							</xsl:if>
							<xsl:if test="string-length(current()/pfx2:CdtrAgt)>0 or string-length(current()/pfx2:CdtrAgtAcct)>0">
								<pfx3:ActInf>
									<pfx3:ActTp>
										<xsl:value-of select="&quot;CDTRAGT&quot;"/>
									</pfx3:ActTp>
									<xsl:choose>
										<xsl:when test="string-length(current()/pfx2:CdtrAgt/pfx2:FinInstnId)>0">
											<pfx3:Agt>
												<xsl:for-each select="current()/pfx2:CdtrAgt/pfx2:FinInstnId">
													<pfx3:FinInstnId>
														<xsl:if test="current()/pfx2:BIC">
															<pfx3:BICFI>
																<xsl:value-of select="current()/pfx2:BIC"/>
															</pfx3:BICFI>
														</xsl:if>
														<xsl:for-each select="pfx2:ClrSysMmbId">
															<pfx3:ClrSysMmbId>
																<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
																	<xsl:for-each select="pfx2:ClrSysId">
																		<pfx3:ClrSysId>
																			<xsl:choose>
																				<xsl:when test="string-length(current()/pfx2:Cd)>0">
																					<pfx3:Cd>
																						<xsl:value-of select="current()/pfx2:Cd"/>
																					</pfx3:Cd>
																				</xsl:when>
																				<xsl:otherwise>
																					<pfx3:Prtry>
																						<xsl:value-of select="current()/pfx2:Prtry"/>
																					</pfx3:Prtry>
																				</xsl:otherwise>
																			</xsl:choose>
																		</pfx3:ClrSysId>
																	</xsl:for-each>
																</xsl:if>
																<pfx3:MmbId>
																	<xsl:value-of select="pfx2:MmbId"/>
																</pfx3:MmbId>
															</pfx3:ClrSysMmbId>
														</xsl:for-each>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
													</pfx3:FinInstnId>
												</xsl:for-each>
											</pfx3:Agt>
										</xsl:when>
										<xsl:otherwise>
											<pfx3:Agt>
												<pfx3:FinInstnId>
													<pfx3:Nm>
														<xsl:value-of select="&quot;NOTPROVIDED&quot;"/>
													</pfx3:Nm>
												</pfx3:FinInstnId>
											</pfx3:Agt>
										</xsl:otherwise>
									</xsl:choose>
									<xsl:if test="string-length(current()/pfx2:CdtrAgtAcct)>0">
										<pfx3:Acct>
											<pfx3:CashAcct>
												<xsl:if test="string-length(current()/pfx2:CdtrAgtAcct/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:CdtrAgtAcct/pfx2:Id/pfx2:Othr)>0">
													<xsl:for-each select="current()/pfx2:CdtrAgtAcct/pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
											</pfx3:CashAcct>
										</pfx3:Acct>
									</xsl:if>
								</pfx3:ActInf>
							</xsl:if>
							<pfx3:AmtInf>
							       <xsl:if test="string-length(normalize-space(current()/pfx2:IntrBkSttlmAmt))>0">
								<pfx3:IntrBkSttlmAmt>
									<xsl:attribute name="Ccy">
										<xsl:value-of select="current()/pfx2:IntrBkSttlmAmt/@Ccy"/>
									</xsl:attribute>
									<xsl:value-of select="current()/pfx2:IntrBkSttlmAmt"/>
								</pfx3:IntrBkSttlmAmt>
								     </xsl:if>
								<xsl:if test="current()/pfx2:XchgRate">
									<pfx3:XchgRate>
										<xsl:value-of select="current()/pfx2:XchgRate"/>
									</pfx3:XchgRate>
								</xsl:if>
							</pfx3:AmtInf>
							<pfx3:SttlmTxInf>
								<xsl:for-each select="../pfx2:GrpHdr/pfx2:SttlmInf">
									<pfx3:SttlmInf>
										<pfx3:SttlmMtd>
											<xsl:value-of select="pfx2:SttlmMtd"/>
										</pfx3:SttlmMtd>
										<xsl:for-each select="pfx2:SttlmAcct">
											<pfx3:SttlmAcct>
												<xsl:if test="string-length(current()/pfx2:Id/pfx2:IBAN)>0 or string-length(current()/pfx2:Id/pfx2:Othr)>0">
													<xsl:for-each select="pfx2:Id">
														<pfx3:Id>
															<xsl:choose>
																<xsl:when test="string-length(current()/pfx2:IBAN)>0">
																	<pfx3:IBAN>
																		<xsl:value-of select="current()/pfx2:IBAN"/>
																	</pfx3:IBAN>
																</xsl:when>
																<xsl:otherwise>
																	<pfx3:Othr>
																		<pfx3:Id>
																			<xsl:value-of select="current()/pfx2:Othr/pfx2:Id"/>
																		</pfx3:Id>
																		<xsl:if test="string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:Othr/pfx2:SchmeNm/pfx2:Prtry)>0">
																			<xsl:for-each select="current()/pfx2:Othr/pfx2:SchmeNm">
																				<pfx3:SchmeNm>
																					<xsl:choose>
																						<xsl:when test="string-length(current()/pfx2:Cd)>0">
																							<pfx3:Cd>
																								<xsl:value-of select="current()/pfx2:Cd"/>
																							</pfx3:Cd>
																						</xsl:when>
																						<xsl:otherwise>
																							<pfx3:Prtry>
																								<xsl:value-of select="current()/pfx2:Prtry"/>
																							</pfx3:Prtry>
																						</xsl:otherwise>
																					</xsl:choose>
																				</pfx3:SchmeNm>
																			</xsl:for-each>
																		</xsl:if>
																		<xsl:if test="current()/pfx2:Othr/pfx2:Issr">
																			<pfx3:Issr>
																				<xsl:value-of select="current()/pfx2:Othr/pfx2:Issr"/>
																			</pfx3:Issr>
																		</xsl:if>
																	</pfx3:Othr>
																</xsl:otherwise>
															</xsl:choose>
														</pfx3:Id>
													</xsl:for-each>
												</xsl:if>
												<xsl:for-each select="pfx2:Tp">
													<pfx3:Tp>
														<xsl:choose>
															<xsl:when test="string-length(current()/pfx2:Cd)>0">
																<pfx3:Cd>
																	<xsl:value-of select="current()/pfx2:Cd"/>
																</pfx3:Cd>
															</xsl:when>
															<xsl:otherwise>
																<pfx3:Prtry>
																	<xsl:value-of select="current()/pfx2:Prtry"/>
																</pfx3:Prtry>
															</xsl:otherwise>
														</xsl:choose>
													</pfx3:Tp>
												</xsl:for-each>
												<xsl:if test="pfx2:Ccy">
													<pfx3:Ccy>
														<xsl:value-of select="pfx2:Ccy"/>
													</pfx3:Ccy>
												</xsl:if>
												<xsl:if test="pfx2:Nm">
													<pfx3:Nm>
														<xsl:value-of select="pfx2:Nm"/>
													</pfx3:Nm>
												</xsl:if>
											</pfx3:SttlmAcct>
										</xsl:for-each>
										<xsl:if test="string-length(current()/pfx2:ClrSys)>0">
											<xsl:for-each select="pfx2:ClrSys">
												<pfx3:ClrSys>
													<xsl:choose>
														<xsl:when test="string-length(current()/pfx2:Cd)>0">
															<pfx3:Cd>
																<xsl:value-of select="current()/pfx2:Cd"/>
															</pfx3:Cd>
														</xsl:when>
														<xsl:otherwise>
															<pfx3:Prtry>
																<xsl:value-of select="current()/pfx2:Prtry"/>
															</pfx3:Prtry>
														</xsl:otherwise>
													</xsl:choose>
												</pfx3:ClrSys>
											</xsl:for-each>
										</xsl:if>
										<xsl:for-each select="pfx2:InstgRmbrsmntAgt">
											<pfx3:InstgRmbrsmntAgt>
												<xsl:for-each select="pfx2:FinInstnId">
													<pfx3:FinInstnId>
														<xsl:if test="current()/pfx2:BIC">
															<pfx3:BICFI>
																<xsl:value-of select="current()/pfx2:BIC"/>
															</pfx3:BICFI>
														</xsl:if>
														<xsl:for-each select="pfx2:ClrSysMmbId">
															<pfx3:ClrSysMmbId>
																<xsl:if test="string-length(current()/pfx2:ClrSysId/pfx2:Cd)>0 or string-length(current()/pfx2:ClrSysId/pfx2:Prtry)>0">
																	<xsl:for-each select="pfx2:ClrSysId">
																		<pfx3:ClrSysId>
																			<xsl:choose>
																				<xsl:when test="string-length(current()/pfx2:Cd)>0">
																					<pfx3:Cd>
																						<xsl:value-of select="current()/pfx2:Cd"/>
																					</pfx3:Cd>
																				</xsl:when>
																				<xsl:otherwise>
																					<pfx3:Prtry>
																						<xsl:value-of select="current()/pfx2:Prtry"/>
																					</pfx3:Prtry>
																				</xsl:otherwise>
																			</xsl:choose>
																		</pfx3:ClrSysId>
																	</xsl:for-each>
																</xsl:if>
																<pfx3:MmbId>
																	<xsl:value-of select="pfx2:MmbId"/>
																</pfx3:MmbId>
															</pfx3:ClrSysMmbId>
														</xsl:for-each>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<pfx3:AdrTp>
																	<pfx3:Cd>
																		<xsl:value-of select="current()/pfx2:AdrTp"/>
																	</pfx3:Cd>
																</pfx3:AdrTp>
																<xsl:if test="pfx2:Dept">
																	<pfx3:Dept>
																		<xsl:value-of select="pfx2:Dept"/>
																	</pfx3:Dept>
																</xsl:if>
																<xsl:if test="pfx2:SubDept">
																	<pfx3:SubDept>
																		<xsl:value-of select="pfx2:SubDept"/>
																	</pfx3:SubDept>
																</xsl:if>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:CtrySubDvsn">
																	<pfx3:CtrySubDvsn>
																		<xsl:value-of select="pfx2:CtrySubDvsn"/>
																	</pfx3:CtrySubDvsn>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
														<xsl:for-each select="pfx2:Othr">
															<pfx3:Othr>
																<pfx3:Id>
																	<xsl:value-of select="pfx2:Id"/>
																</pfx3:Id>
																<xsl:if test="string-length(current()/pfx2:SchmeNm/pfx2:Cd)>0 or string-length(current()/pfx2:SchmeNm/pfx2:Prtry)>0">
																	<xsl:for-each select="pfx2:SchmeNm">
																		<pfx3:SchmeNm>
																			<xsl:choose>
																				<xsl:when test="string-length(current()/pfx2:Cd)>0">
																					<pfx3:Cd>
																						<xsl:value-of select="current()/pfx2:Cd"/>
																					</pfx3:Cd>
																				</xsl:when>
																				<xsl:otherwise>
																					<pfx3:Prtry>
																						<xsl:value-of select="current()/pfx2:Prtry"/>
																					</pfx3:Prtry>
																				</xsl:otherwise>
																			</xsl:choose>
																		</pfx3:SchmeNm>
																	</xsl:for-each>
																</xsl:if>
																<xsl:if test="pfx2:Issr">
																	<pfx3:Issr>
																		<xsl:value-of select="pfx2:Issr"/>
																	</pfx3:Issr>
																</xsl:if>
															</pfx3:Othr>
														</xsl:for-each>
													</pfx3:FinInstnId>
												</xsl:for-each>
												<xsl:for-each select="pfx2:BrnchId">
													<pfx3:BrnchId>
														<xsl:if test="pfx2:Id">
															<pfx3:Id>
																<xsl:value-of select="pfx2:Id"/>
															</pfx3:Id>
														</xsl:if>
														<xsl:if test="pfx2:Nm">
															<pfx3:Nm>
																<xsl:value-of select="pfx2:Nm"/>
															</pfx3:Nm>
														</xsl:if>
														<xsl:for-each select="pfx2:PstlAdr">
															<pfx3:PstlAdr>
																<pfx3:AdrTp>
																	<pfx3:Cd>
																		<xsl:value-of select="current()/pfx2:AdrTp"/>
																	</pfx3:Cd>
																</pfx3:AdrTp>
																<xsl:if test="pfx2:Dept">
																	<pfx3:Dept>
																		<xsl:value-of select="pfx2:Dept"/>
																	</pfx3:Dept>
																</xsl:if>
																<xsl:if test="pfx2:SubDept">
																	<pfx3:SubDept>
																		<xsl:value-of select="pfx2:SubDept"/>
																	</pfx3:SubDept>
																</xsl:if>
																<xsl:if test="pfx2:StrtNm">
																	<pfx3:StrtNm>
																		<xsl:value-of select="pfx2:StrtNm"/>
																	</pfx3:StrtNm>
																</xsl:if>
																<xsl:if test="pfx2:BldgNb">
																	<pfx3:BldgNb>
																		<xsl:value-of select="pfx2:BldgNb"/>
																	</pfx3:BldgNb>
																</xsl:if>
																<xsl:if test="pfx2:PstCd">
																	<pfx3:PstCd>
																		<xsl:value-of select="pfx2:PstCd"/>
																	</pfx3:PstCd>
																</xsl:if>
																<xsl:if test="pfx2:TwnNm">
																	<pfx3:TwnNm>
																		<xsl:value-of select="pfx2:TwnNm"/>
																	</pfx3:TwnNm>
																</xsl:if>
																<xsl:if test="pfx2:CtrySubDvsn">
																	<pfx3:CtrySubDvsn>
																		<xsl:value-of select="pfx2:CtrySubDvsn"/>
																	</pfx3:CtrySubDvsn>
																</xsl:if>
																<xsl:if test="pfx2:Ctry">
																	<pfx3:Ctry>
																		<xsl:value-of select="pfx2:Ctry"/>
																	</pfx3:Ctry>
																</xsl:if>
																<xsl:for-each select="pfx2:AdrLine">
																	<pfx3:AdrLine>
																		<xsl:value-of select="."/>
																	</pfx3:AdrLine>
																</xsl:for-each>
															</pfx3:PstlAdr>
														</xsl:for-each>
													</pfx3:BrnchId>
												</xsl:for-each>
											</pfx3:InstgRmbrsmntAgt>
										</xsl:for-each>
									</pfx3:SttlmInf>
								</xsl:for-each>
								<xsl:if test="current()/pfx2:SttlmPrty">
									<pfx3:SttlmPrty>
										<xsl:value-of select="current()/pfx2:SttlmPrty"/>
									</pfx3:SttlmPrty>
								</xsl:if>
							</pfx3:SttlmTxInf>
							<pfx3:OthrInf>
								<xsl:for-each select="current()/pfx2:InstrForCdtrAgt">
									<pfx3:InstrForCdtrAgt>
										<xsl:if test="pfx2:Cd">
											<pfx3:Cd>
												<xsl:value-of select="pfx2:Cd"/>
											</pfx3:Cd>
										</xsl:if>
										<xsl:if test="pfx2:InstrInf">
											<pfx3:InstrInf>
												<xsl:value-of select="pfx2:InstrInf"/>
											</pfx3:InstrInf>
										</xsl:if>
									</pfx3:InstrForCdtrAgt>
								</xsl:for-each>
								<xsl:for-each select="current()/pfx2:InstrForNxtAgt">
									<pfx3:InstrForNxtAgt>
										<xsl:if test="pfx2:Cd">
											<pfx3:Cd>
												<xsl:value-of select="pfx2:Cd"/>
											</pfx3:Cd>
										</xsl:if>
										<xsl:if test="pfx2:InstrInf">
											<pfx3:InstrInf>
												<xsl:value-of select="pfx2:InstrInf"/>
											</pfx3:InstrInf>
										</xsl:if>
									</pfx3:InstrForNxtAgt>
								</xsl:for-each>
							</pfx3:OthrInf>
						</pfx3:IntrBkInf>
					</pfx3:TxInf>
				</xsl:for-each>
			</pfx3:PmtPvt>
		</Document>
	</xsl:template>
</xsl:stylesheet>